import{r as a,O as e,d as s,ah as r,N as t,w as l,l as n,o,c as i,b as u,m as c,a as p,g as v,aV as d,f as m,v as f,ai as b,aJ as w,p as h,q as k,_}from"./index-Ch1CAwop.js";const y=a=>(h("data-v-d44cef23"),a=a(),k(),a),F={class:"iframe-browser-inner-wrap"},g={class:"iframe-browser-address-bar-wrap"},x={class:"button-wrap"},C=[y((()=>u("span",{class:"mdi mdi-star"},null,-1)))],P=[y((()=>u("span",{class:"mdi mdi-arrow-right"},null,-1)))],j=["src"],E=_(s({name:"IframeBrowser",props:{task:{},appParams:{}},emits:["update:visible"],setup(s,{emit:h}){const k=s,{task:_}=r(k),y=a(!1),E=a(),I=a(""),V=t("pagecraft_iframe_browser_url",""),B=()=>{I.value="",I.value=V.value,y.value=!0},D=()=>{window.open(E.value.src)};l((()=>k.appParams),(()=>{if(!k.appParams)return;const{url:a}=k.appParams;a&&(V.value=a,B())}),{immediate:!0});const L=n((()=>y.value?"Loading...":E.value&&E.value.contentDocument?E.value.contentDocument.title:"iFrame Browser"));l(L,(a=>{_.value&&(_.value.title=a)})),e((()=>{V.value&&B()}));const O=()=>{y.value=!1},U=a=>{y.value=!1,console.error("[handleIframeError]",a)},{options:q}=(({fetchFn:s,mapFn:r})=>{const t=a([]),l=(a=[],e=[])=>(a.forEach((a=>{const s={children:a.children?l(a.children):void 0,...r(a)};e.push(s)})),e),n=async()=>{const a=await s();t.value=l(a)};return e(n),{options:t,traverse:l,loadOptions:n}})({fetchFn:async()=>{const a=await fetch("./bookmarks.json");return await a.json()},mapFn:a=>({label:"ðŸŒŽ "+(a.label||a.value),value:a.value,props:{onClick:a.children?void 0:()=>{V.value=a.value,B()}}})}),J=a(!1);return(a,e)=>(o(),i("div",F,[u("div",g,[u("div",x,[u("button",{class:"vp-button",onClick:e[0]||(e[0]=a=>J.value=!0)},C),c(d,{options:p(q),visible:p(J),"onUpdate:visible":e[1]||(e[1]=a=>v(J)?J.value=a:null),title:"Shortcuts"},null,8,["options","visible"])]),m(u("input",{class:"iframe-browser-input vp-input font-code","onUpdate:modelValue":e[2]||(e[2]=a=>v(V)?V.value=a:null),placeholder:"input url (https://)",type:"text",onKeyup:e[3]||(e[3]=b((a=>B()),["enter"]))},null,544),[[f,p(V)]]),u("button",{class:"vp-button",onClick:e[4]||(e[4]=a=>B()),onContextmenu:w(D,["stop"]),title:"Visit Website"},P,32)]),u("iframe",{ref_key:"iframeRef",ref:E,onLoad:O,onError:U,class:"iframe-browser-inner-iframe",src:p(I),frameborder:"0"},null,40,j)]))}}),[["__scopeId","data-v-d44cef23"]]);export{E as default};
