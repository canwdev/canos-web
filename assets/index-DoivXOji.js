import{r as e,w as n,c5 as o,c6 as t,c7 as i,$ as r,aH as l,c8 as a,aG as d,d as s,B as c,ar as u,a2 as p,c9 as v,z as f,ag as h,S as m,aU as b,aV as y,aW as w,a8 as x,T as k,a7 as g,bO as C,aN as S,F as N,ca as R,cb as P,cc as O,cd as I,l as _,ab as A,p as z,aa as $,a9 as B,m as F,aQ as T,ac as K,q as D,s as j,ce as L,as as E,a4 as M,A as q,cf as H,ax as U,cg as V,bi as W,ch as G,o as Q,c as J,j as X,k as Y,a as Z,h as ee,_ as ne,b as oe,E as te,ci as ie,cj as re,bL as le,n as ae,bI as de,bW as se,ck as ce,D as ue,K as pe,N as ve,e as fe,bm as he,G as me}from"./index-DSBX7T2Q.js";import{C as be,h as ye,a as we,_ as xe}from"./VueRender.vue_vue_type_script_lang-CiF-4_Kx.js";function ke(e){return n=>{e.value=n?n.$el:null}}const ge=s({name:"DropdownDivider",props:{clsPrefix:{type:String,required:!0}},render(){return c("div",{class:`${this.clsPrefix}-dropdown-divider`})}}),Ce=u("n-dropdown-menu"),Se=u("n-dropdown"),Ne=u("n-dropdown-option");function Re(e,n){return"submenu"===e.type||void 0===e.type&&void 0!==e[n]}function Pe(e){return"divider"===e.type}const Oe=s({name:"DropdownOption",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0},parentKey:{type:[String,Number],default:null},placement:{type:String,default:"right-start"},props:Object,scrollable:Boolean},setup(o){const t=p(Se),{hoverKeyRef:i,keyboardKeyRef:r,lastToggledSubmenuKeyRef:l,pendingKeyPathRef:a,activeKeyPathRef:d,animatedRef:s,mergedShowRef:c,renderLabelRef:u,renderIconRef:b,labelFieldRef:y,childrenFieldRef:w,renderOptionRef:x,nodePropsRef:k,menuPropsRef:g}=t,C=p(Ne,null),S=p(Ce),N=p(v),R=f((()=>o.tmNode.rawNode)),P=f((()=>{const{value:e}=w;return Re(o.tmNode.rawNode,e)})),O=f((()=>{const{disabled:e}=o.tmNode;return e})),I=function(o,t,i){if(!t)return o;const r=e(o.value);let l=null;return n(o,(e=>{null!==l&&window.clearTimeout(l),!0===e?i&&!i.value?r.value=!0:l=window.setTimeout((()=>{r.value=!0}),t):r.value=!1})),r}(f((()=>{if(!P.value)return!1;const{key:e,disabled:n}=o.tmNode;if(n)return!1;const{value:t}=i,{value:d}=r,{value:s}=l,{value:c}=a;return null!==t?c.includes(e):null!==d?c.includes(e)&&c[c.length-1]!==e:null!==s&&c.includes(e)})),300,f((()=>null===r.value&&!s.value))),_=f((()=>!!(null==C?void 0:C.enteringSubmenuRef.value))),A=e(!1);function z(){const{parentKey:e,tmNode:n}=o;n.disabled||c.value&&(l.value=e,r.value=null,i.value=n.key)}return h(Ne,{enteringSubmenuRef:A}),{labelField:y,renderLabel:u,renderIcon:b,siblingHasIcon:S.showIconRef,siblingHasSubmenu:S.hasSubmenuRef,menuProps:g,popoverBody:N,animated:s,mergedShowSubmenu:f((()=>I.value&&!_.value)),rawNode:R,hasSubmenu:P,pending:m((()=>{const{value:e}=a,{key:n}=o.tmNode;return e.includes(n)})),childActive:m((()=>{const{value:e}=d,{key:n}=o.tmNode,t=e.findIndex((e=>n===e));return-1!==t&&t<e.length-1})),active:m((()=>{const{value:e}=d,{key:n}=o.tmNode,t=e.findIndex((e=>n===e));return-1!==t&&t===e.length-1})),mergedDisabled:O,renderOption:x,nodeProps:k,handleClick:function(){const{value:e}=P,{tmNode:n}=o;c.value&&(e||n.disabled||(t.doSelect(n.key,n.rawNode),t.doUpdateShow(!1)))},handleMouseMove:function(){const{tmNode:e}=o;e.disabled||c.value&&i.value!==e.key&&z()},handleMouseEnter:z,handleMouseLeave:function(e){if(o.tmNode.disabled)return;if(!c.value)return;const{relatedTarget:n}=e;!n||ye({target:n},"dropdownOption")||ye({target:n},"scrollbarRail")||(i.value=null)},handleSubmenuBeforeEnter:function(){A.value=!0},handleSubmenuAfterEnter:function(){A.value=!1}}},render(){var e,n;const{animated:o,rawNode:t,mergedShowSubmenu:i,clsPrefix:r,siblingHasIcon:l,siblingHasSubmenu:a,renderLabel:d,renderIcon:s,renderOption:u,nodeProps:p,props:v,scrollable:f}=this;let h=null;if(i){const n=null===(e=this.menuProps)||void 0===e?void 0:e.call(this,t,t.children);h=c(ze,Object.assign({},n,{clsPrefix:r,scrollable:this.scrollable,tmNodes:this.tmNode.children,parentKey:this.tmNode.key}))}const m={class:[`${r}-dropdown-option-body`,this.pending&&`${r}-dropdown-option-body--pending`,this.active&&`${r}-dropdown-option-body--active`,this.childActive&&`${r}-dropdown-option-body--child-active`,this.mergedDisabled&&`${r}-dropdown-option-body--disabled`],onMousemove:this.handleMouseMove,onMouseenter:this.handleMouseEnter,onMouseleave:this.handleMouseLeave,onClick:this.handleClick},S=null==p?void 0:p(t),N=c("div",Object.assign({class:[`${r}-dropdown-option`,null==S?void 0:S.class],"data-dropdown-option":!0},S),c("div",k(m,v),[c("div",{class:[`${r}-dropdown-option-body__prefix`,l&&`${r}-dropdown-option-body__prefix--show-icon`]},[s?s(t):g(t.icon)]),c("div",{"data-dropdown-option":!0,class:`${r}-dropdown-option-body__label`},d?d(t):g(null!==(n=t[this.labelField])&&void 0!==n?n:t.title)),c("div",{"data-dropdown-option":!0,class:[`${r}-dropdown-option-body__suffix`,a&&`${r}-dropdown-option-body__suffix--has-submenu`]},this.hasSubmenu?c(C,null,{default:()=>c(be,null)}):null)]),this.hasSubmenu?c(b,null,{default:()=>[c(y,null,{default:()=>c("div",{class:`${r}-dropdown-offset-container`},c(w,{show:this.mergedShowSubmenu,placement:this.placement,to:f&&this.popoverBody||void 0,teleportDisabled:!f},{default:()=>c("div",{class:`${r}-dropdown-menu-wrapper`},o?c(x,{onBeforeEnter:this.handleSubmenuBeforeEnter,onAfterEnter:this.handleSubmenuAfterEnter,name:"fade-in-scale-up-transition",appear:!0},{default:()=>h}):h)}))})]}):null);return u?u({node:N,option:t}):N}}),Ie=s({name:"DropdownGroupHeader",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(){const{showIconRef:e,hasSubmenuRef:n}=p(Ce),{renderLabelRef:o,labelFieldRef:t,nodePropsRef:i,renderOptionRef:r}=p(Se);return{labelField:t,showIcon:e,hasSubmenu:n,renderLabel:o,nodeProps:i,renderOption:r}},render(){var e;const{clsPrefix:n,hasSubmenu:o,showIcon:t,nodeProps:i,renderLabel:r,renderOption:l}=this,{rawNode:a}=this.tmNode,d=c("div",Object.assign({class:`${n}-dropdown-option`},null==i?void 0:i(a)),c("div",{class:`${n}-dropdown-option-body ${n}-dropdown-option-body--group`},c("div",{"data-dropdown-option":!0,class:[`${n}-dropdown-option-body__prefix`,t&&`${n}-dropdown-option-body__prefix--show-icon`]},g(a.icon)),c("div",{class:`${n}-dropdown-option-body__label`,"data-dropdown-option":!0},r?r(a):g(null!==(e=a.title)&&void 0!==e?e:a[this.labelField])),c("div",{class:[`${n}-dropdown-option-body__suffix`,o&&`${n}-dropdown-option-body__suffix--has-submenu`],"data-dropdown-option":!0})));return l?l({node:d,option:a}):d}}),_e=s({name:"NDropdownGroup",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0},parentKey:{type:[String,Number],default:null}},render(){const{tmNode:e,parentKey:n,clsPrefix:o}=this,{children:t}=e;return c(N,null,c(Ie,{clsPrefix:o,tmNode:e,key:e.key}),null==t?void 0:t.map((e=>{const{rawNode:t}=e;return!1===t.show?null:Pe(t)?c(ge,{clsPrefix:o,key:e.key}):e.isGroup?(S("dropdown","`group` node is not allowed to be put in `group` node."),null):c(Oe,{clsPrefix:o,tmNode:e,parentKey:n,key:e.key})})))}}),Ae=s({name:"DropdownRenderOption",props:{tmNode:{type:Object,required:!0}},render(){const{rawNode:{render:e,props:n}}=this.tmNode;return c("div",n,[null==e?void 0:e()])}}),ze=s({name:"DropdownMenu",props:{scrollable:Boolean,showArrow:Boolean,arrowStyle:[String,Object],clsPrefix:{type:String,required:!0},tmNodes:{type:Array,default:()=>[]},parentKey:{type:[String,Number],default:null}},setup(n){const{renderIconRef:o,childrenFieldRef:t}=p(Se);h(Ce,{showIconRef:f((()=>{const e=o.value;return n.tmNodes.some((n=>{var o;if(n.isGroup)return null===(o=n.children)||void 0===o?void 0:o.some((({rawNode:n})=>e?e(n):n.icon));const{rawNode:t}=n;return e?e(t):t.icon}))})),hasSubmenuRef:f((()=>{const{value:e}=t;return n.tmNodes.some((n=>{var o;if(n.isGroup)return null===(o=n.children)||void 0===o?void 0:o.some((({rawNode:n})=>Re(n,e)));const{rawNode:t}=n;return Re(t,e)}))}))});const i=e(null);return h(R,null),h(P,null),h(v,i),{bodyRef:i}},render(){const{parentKey:e,clsPrefix:n,scrollable:o}=this,t=this.tmNodes.map((t=>{const{rawNode:i}=t;return!1===i.show?null:function(e){return"render"===e.type}(i)?c(Ae,{tmNode:t,key:t.key}):Pe(i)?c(ge,{clsPrefix:n,key:t.key}):function(e){return"group"===e.type}(i)?c(_e,{clsPrefix:n,tmNode:t,parentKey:e,key:t.key}):c(Oe,{clsPrefix:n,tmNode:t,parentKey:e,key:t.key,props:i.props,scrollable:o})}));return c("div",{class:[`${n}-dropdown-menu`,o&&`${n}-dropdown-menu--scrollable`],ref:"bodyRef"},o?c(I,{contentClass:`${n}-dropdown-menu__content`},{default:()=>t}):t,this.showArrow?O({clsPrefix:n,arrowStyle:this.arrowStyle,arrowClass:void 0,arrowWrapperClass:void 0,arrowWrapperStyle:void 0}):null)}}),$e=_("dropdown-menu","\n transform-origin: var(--v-transform-origin);\n background-color: var(--n-color);\n border-radius: var(--n-border-radius);\n box-shadow: var(--n-box-shadow);\n position: relative;\n transition:\n background-color .3s var(--n-bezier),\n box-shadow .3s var(--n-bezier);\n",[A(),_("dropdown-option","\n position: relative;\n ",[z("a","\n text-decoration: none;\n color: inherit;\n outline: none;\n ",[z("&::before",'\n content: "";\n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n ')]),_("dropdown-option-body","\n display: flex;\n cursor: pointer;\n position: relative;\n height: var(--n-option-height);\n line-height: var(--n-option-height);\n font-size: var(--n-font-size);\n color: var(--n-option-text-color);\n transition: color .3s var(--n-bezier);\n ",[z("&::before",'\n content: "";\n position: absolute;\n top: 0;\n bottom: 0;\n left: 4px;\n right: 4px;\n transition: background-color .3s var(--n-bezier);\n border-radius: var(--n-border-radius);\n '),$("disabled",[B("pending","\n color: var(--n-option-text-color-hover);\n ",[F("prefix, suffix","\n color: var(--n-option-text-color-hover);\n "),z("&::before","background-color: var(--n-option-color-hover);")]),B("active","\n color: var(--n-option-text-color-active);\n ",[F("prefix, suffix","\n color: var(--n-option-text-color-active);\n "),z("&::before","background-color: var(--n-option-color-active);")]),B("child-active","\n color: var(--n-option-text-color-child-active);\n ",[F("prefix, suffix","\n color: var(--n-option-text-color-child-active);\n ")])]),B("disabled","\n cursor: not-allowed;\n opacity: var(--n-option-opacity-disabled);\n "),B("group","\n font-size: calc(var(--n-font-size) - 1px);\n color: var(--n-group-header-text-color);\n ",[F("prefix","\n width: calc(var(--n-option-prefix-width) / 2);\n ",[B("show-icon","\n width: calc(var(--n-option-icon-prefix-width) / 2);\n ")])]),F("prefix","\n width: var(--n-option-prefix-width);\n display: flex;\n justify-content: center;\n align-items: center;\n color: var(--n-prefix-color);\n transition: color .3s var(--n-bezier);\n z-index: 1;\n ",[B("show-icon","\n width: var(--n-option-icon-prefix-width);\n "),_("icon","\n font-size: var(--n-option-icon-size);\n ")]),F("label","\n white-space: nowrap;\n flex: 1;\n z-index: 1;\n "),F("suffix","\n box-sizing: border-box;\n flex-grow: 0;\n flex-shrink: 0;\n display: flex;\n justify-content: flex-end;\n align-items: center;\n min-width: var(--n-option-suffix-width);\n padding: 0 8px;\n transition: color .3s var(--n-bezier);\n color: var(--n-suffix-color);\n z-index: 1;\n ",[B("has-submenu","\n width: var(--n-option-icon-suffix-width);\n "),_("icon","\n font-size: var(--n-option-icon-size);\n ")]),_("dropdown-menu","pointer-events: all;")]),_("dropdown-offset-container","\n pointer-events: none;\n position: absolute;\n left: 0;\n right: 0;\n top: -4px;\n bottom: -4px;\n ")]),_("dropdown-divider","\n transition: background-color .3s var(--n-bezier);\n background-color: var(--n-divider-color);\n height: 1px;\n margin: 4px 0;\n "),_("dropdown-menu-wrapper","\n transform-origin: var(--v-transform-origin);\n width: fit-content;\n "),z(">",[_("scrollbar","\n height: inherit;\n max-height: inherit;\n ")]),$("scrollable","\n padding: var(--n-padding);\n "),B("scrollable",[F("content","\n padding: var(--n-padding);\n ")])]),Be={animated:{type:Boolean,default:!0},keyboard:{type:Boolean,default:!0},size:{type:String,default:"medium"},inverted:Boolean,placement:{type:String,default:"bottom"},onSelect:[Function,Array],options:{type:Array,default:()=>[]},menuProps:Function,showArrow:Boolean,renderLabel:Function,renderIcon:Function,renderOption:Function,nodeProps:Function,labelField:{type:String,default:"label"},keyField:{type:String,default:"key"},childrenField:{type:String,default:"children"},value:[String,Number]},Fe=Object.keys(V),Te=s({name:"Dropdown",inheritAttrs:!1,props:Object.assign(Object.assign(Object.assign({},V),Be),j.props),setup(s){const c=e(!1),u=T(K(s,"show"),c),p=f((()=>{const{keyField:e,childrenField:n}=s;return we(s.options,{getKey:n=>n[e],getDisabled:e=>!0===e.disabled,getIgnored:e=>"divider"===e.type||"render"===e.type,getChildren:e=>e[n]})})),v=f((()=>p.value.treeNodes)),b=e(null),y=e(null),w=e(null),x=f((()=>{var e,n,o;return null!==(o=null!==(n=null!==(e=b.value)&&void 0!==e?e:y.value)&&void 0!==n?n:w.value)&&void 0!==o?o:null})),k=f((()=>p.value.getPath(x.value).keyPath)),g=f((()=>p.value.getPath(s.value).keyPath));!function(e={},s){const c=o({ctrl:!1,command:!1,win:!1,shift:!1,tab:!1}),{keydown:u,keyup:p}=e,v=e=>{switch(e.key){case"Control":c.ctrl=!0;break;case"Meta":c.command=!0,c.win=!0;break;case"Shift":c.shift=!0;break;case"Tab":c.tab=!0}void 0!==u&&Object.keys(u).forEach((n=>{if(n!==e.key)return;const o=u[n];if("function"==typeof o)o(e);else{const{stop:n=!1,prevent:t=!1}=o;n&&e.stopPropagation(),t&&e.preventDefault(),o.handler(e)}}))},f=e=>{switch(e.key){case"Control":c.ctrl=!1;break;case"Meta":c.command=!1,c.win=!1;break;case"Shift":c.shift=!1;break;case"Tab":c.tab=!1}void 0!==p&&Object.keys(p).forEach((n=>{if(n!==e.key)return;const o=p[n];if("function"==typeof o)o(e);else{const{stop:n=!1,prevent:t=!1}=o;n&&e.stopPropagation(),t&&e.preventDefault(),o.handler(e)}}))},h=()=>{(void 0===s||s.value)&&(d("keydown",document,v),d("keyup",document,f)),void 0!==s&&n(s,(e=>{e?(d("keydown",document,v),d("keyup",document,f)):(l("keydown",document,v),l("keyup",document,f))}))};t()?(i(h),r((()=>{(void 0===s||s.value)&&(l("keydown",document,v),l("keyup",document,f))}))):h(),a(c)}({keydown:{ArrowUp:{prevent:!0,handler:function(){_("up")}},ArrowRight:{prevent:!0,handler:function(){_("right")}},ArrowDown:{prevent:!0,handler:function(){_("down")}},ArrowLeft:{prevent:!0,handler:function(){_("left")}},Enter:{prevent:!0,handler:function(){const e=I();(null==e?void 0:e.isLeaf)&&u.value&&(R(e.key,e.rawNode),P(!1))}},Escape:function(){P(!1)}}},m((()=>s.keyboard&&u.value)));const{mergedClsPrefixRef:C,inlineThemeDisabled:S}=D(s),N=j("Dropdown","-dropdown",$e,L,s,C);function R(e,n){const{onSelect:o}=s;o&&E(o,e,n)}function P(e){const{"onUpdate:show":n,onUpdateShow:o}=s;n&&E(n,e),o&&E(o,e),c.value=e}function O(){b.value=null,y.value=null,w.value=null}function I(){var e;const{value:n}=p,{value:o}=x;return n&&null!==o&&null!==(e=n.getNode(o))&&void 0!==e?e:null}function _(e){const{value:n}=x,{value:{getFirstAvailableNode:o}}=p;let t=null;if(null===n){const e=o();null!==e&&(t=e.key)}else{const n=I();if(n){let o;switch(e){case"down":o=n.getNext();break;case"up":o=n.getPrev();break;case"right":o=n.getChild();break;case"left":o=n.getParent()}o&&(t=o.key)}}null!==t&&(b.value=null,y.value=t)}h(Se,{labelFieldRef:K(s,"labelField"),childrenFieldRef:K(s,"childrenField"),renderLabelRef:K(s,"renderLabel"),renderIconRef:K(s,"renderIcon"),hoverKeyRef:b,keyboardKeyRef:y,lastToggledSubmenuKeyRef:w,pendingKeyPathRef:k,activeKeyPathRef:g,animatedRef:K(s,"animated"),mergedShowRef:u,nodePropsRef:K(s,"nodeProps"),renderOptionRef:K(s,"renderOption"),menuPropsRef:K(s,"menuProps"),doSelect:R,doUpdateShow:P}),n(u,(e=>{s.animated||e||O()}));const A=f((()=>{const{size:e,inverted:n}=s,{common:{cubicBezierEaseInOut:o},self:t}=N.value,{padding:i,dividerColor:r,borderRadius:l,optionOpacityDisabled:a,[M("optionIconSuffixWidth",e)]:d,[M("optionSuffixWidth",e)]:c,[M("optionIconPrefixWidth",e)]:u,[M("optionPrefixWidth",e)]:p,[M("fontSize",e)]:v,[M("optionHeight",e)]:f,[M("optionIconSize",e)]:h}=t,m={"--n-bezier":o,"--n-font-size":v,"--n-padding":i,"--n-border-radius":l,"--n-option-height":f,"--n-option-prefix-width":p,"--n-option-icon-prefix-width":u,"--n-option-suffix-width":c,"--n-option-icon-suffix-width":d,"--n-option-icon-size":h,"--n-divider-color":r,"--n-option-opacity-disabled":a};return n?(m["--n-color"]=t.colorInverted,m["--n-option-color-hover"]=t.optionColorHoverInverted,m["--n-option-color-active"]=t.optionColorActiveInverted,m["--n-option-text-color"]=t.optionTextColorInverted,m["--n-option-text-color-hover"]=t.optionTextColorHoverInverted,m["--n-option-text-color-active"]=t.optionTextColorActiveInverted,m["--n-option-text-color-child-active"]=t.optionTextColorChildActiveInverted,m["--n-prefix-color"]=t.prefixColorInverted,m["--n-suffix-color"]=t.suffixColorInverted,m["--n-group-header-text-color"]=t.groupHeaderTextColorInverted):(m["--n-color"]=t.color,m["--n-option-color-hover"]=t.optionColorHover,m["--n-option-color-active"]=t.optionColorActive,m["--n-option-text-color"]=t.optionTextColor,m["--n-option-text-color-hover"]=t.optionTextColorHover,m["--n-option-text-color-active"]=t.optionTextColorActive,m["--n-option-text-color-child-active"]=t.optionTextColorChildActive,m["--n-prefix-color"]=t.prefixColor,m["--n-suffix-color"]=t.suffixColor,m["--n-group-header-text-color"]=t.groupHeaderTextColor),m})),z=S?q("dropdown",f((()=>`${s.size[0]}${s.inverted?"i":""}`)),A,s):void 0;return{mergedClsPrefix:C,mergedTheme:N,tmNodes:v,mergedShow:u,handleAfterLeave:()=>{s.animated&&O()},doUpdateShow:P,cssVars:S?void 0:A,themeClass:null==z?void 0:z.themeClass,onRender:null==z?void 0:z.onRender}},render(){const{mergedTheme:e}=this,n={show:this.mergedShow,theme:e.peers.Popover,themeOverrides:e.peerOverrides.Popover,internalOnAfterLeave:this.handleAfterLeave,internalRenderBody:(e,n,o,t,i)=>{var r;const{mergedClsPrefix:l,menuProps:a}=this;null===(r=this.onRender)||void 0===r||r.call(this);const d=(null==a?void 0:a(void 0,this.tmNodes.map((e=>e.rawNode))))||{},s={ref:ke(n),class:[e,`${l}-dropdown`,this.themeClass],clsPrefix:l,tmNodes:this.tmNodes,style:[...o,this.cssVars],showArrow:this.showArrow,arrowStyle:this.arrowStyle,scrollable:this.scrollable,onMouseenter:t,onMouseleave:i};return c(ze,k(this.$attrs,s,d))},onUpdateShow:this.doUpdateShow,"onUpdate:show":void 0};return c(U,Object.assign({},H(this.$props,Fe),n),{trigger:()=>{var e,n;return null===(n=(e=this.$slots).default)||void 0===n?void 0:n.call(e)}})}}),Ke={class:"dynamic-value-display"},De={key:0,class:"d-label"},je=ne(s({__name:"DynamicValueDisplay",props:{text:{default:""},label:{},formatFn:{}},setup(n){const o=n,{text:t}=W(o),i=e("");return G(t,(()=>{"function"==typeof o.formatFn?i.value=o.formatFn(t.value):i.value=t.value}),{debounce:300,immediate:!0}),(e,n)=>(Q(),J("div",Ke,[X(Y(Z(i))+" ",1),e.label?(Q(),J("span",De,Y(e.label),1)):ee("",!0)]))}}),[["__scopeId","data-v-fe46d2a4"]]),Le=["data-index"],Ee={key:0,class:"index-wrap"},Me={key:1,class:"item-icon"},qe={key:2,class:"item-icon"},He=["src"],Ue=["innerHTML"],Ve={key:4,class:"item-content"},We={key:5,class:"item-content"},Ge={key:6,class:"item-content"},Qe=[oe("div",{class:"css-arrow right"},null,-1)],Je=s({name:"QuickOptions",components:{QOptionItem:s({__name:"QOptionItem",props:{item:{},index:{default:0},curIndex:{default:0},itemCls:{default:""},showIndex:{type:Boolean,default:!0}},emits:["onArrowClick"],setup:(e,{emit:n})=>(e,n)=>{var o,t,i,r,l,a;return Q(),J("div",{class:ae(["option-item",[{focus:e.curIndex===e.index,clickable:(null==(t=null==(o=e.item)?void 0:o.props)?void 0:t.onClick)||(null==(r=null==(i=e.item)?void 0:i.props)?void 0:r.isBack)||e.item.children&&e.item.children,disabled:e.item.disabled},e.itemCls,null==(l=e.item.props)?void 0:l.class]]),style:de(null==(a=e.item.props)?void 0:a.style),"data-index":e.index},[e.showIndex&&e.index<9?(Q(),J("div",Ee,[oe("span",null,Y(e.index+1),1)])):ee("",!0),e.item.iconRender?(Q(),J("div",Me,[te(xe,{"render-fn":e.item.iconRender},null,8,["render-fn"])])):e.item.icon?(Q(),J("div",qe,[oe("img",{src:e.item.icon},null,8,He)])):ee("",!0),e.item.html?(Q(),J("div",{key:3,class:"item-content",innerHTML:e.item.html},null,8,Ue)):e.item.render?(Q(),J("div",Ve,[te(xe,{"render-fn":e.item.render},null,8,["render-fn"])])):e.item.dynamicProps?(Q(),J("div",We,[te(je,ie(re(e.item.dynamicProps)),null,16)])):(Q(),J("div",Ge,Y(e.item.label),1)),e.item.children&&e.item.children?(Q(),J("div",{key:7,class:"arrow-wrap",onClick:n[0]||(n[0]=le((n=>e.$emit("onArrowClick")),["stop"]))},Qe)):ee("",!0)],14,Le)}})},props:{visible:{type:Boolean,default:!1},closeOnClick:{type:Boolean,default:!0},horizontal:{type:Boolean,default:!1},title:{type:String,default:""},options:{type:Array,default:()=>[]},isStatic:{type:Boolean,default:!1},autoFocus:{type:Boolean,default:!0},showIndex:{type:Boolean,default:!0},itemCls:{type:String,default:""}},emits:["onClose","update:visible","onBack","onEnter"],setup(o,{emit:t}){const{options:i,horizontal:r,isStatic:l,autoFocus:a,closeOnClick:d}=W(o),s=se(o,"visible",t),c=e();ce(c,(e=>{l.value||setTimeout((()=>{s.value=!1}))}));const u=()=>{const e=c.value.querySelector(`[data-index="${p.value}"]`);pe((()=>{e&&e.scrollIntoView({behavior:"instant",block:"center"})}))},p=e(0),v=e=>w.value[e]&&w.value[e].split?2:1,h=()=>{p.value-=v(p.value-1),p.value<0&&(p.value=w.value.length-1),u()},m=()=>{p.value+=v(p.value+1),p.value>w.value.length-1&&(p.value=0),u()},b=()=>{setTimeout((()=>{c.value.focus()}),10)};ue((()=>{l.value&&a.value&&b()})),n(s,(e=>{e?(p.value=0,a.value&&b()):y.value=[]}));const y=e([]),w=f((()=>{if(y.value.length){const e=y.value[y.value.length-1];return e.__v_isRef?e.value:e}return i.value})),x=()=>{y.value.length?(y.value.pop(),t("onBack")):(s.value=!1,setTimeout((()=>{t("onClose")}),100)),p.value=0,u()},k=()=>{const e=w.value[p.value];g(e)},g=async(e,n,o=!1)=>{var i,r;if(!e.disabled){if((null==(i=null==e?void 0:e.props)?void 0:i.onClick)&&!o)e.props.onClick(e,n),d.value&&(s.value=!1);else if(e.children){let n=[];"function"==typeof e.children?n=await e.children():e.children.length&&(n=e.children),y.value.push(n),p.value=0,t("onEnter")}if(null==(r=null==e?void 0:e.props)?void 0:r.isBack)if("number"==typeof e.props.isBack)for(let n=0;n<e.props.isBack;n++)x();else x()}};return{mVisible:s,quickRootRef:c,menuStack:y,curIndex:p,handleKeyPress:e=>{if(e.preventDefault(),"Escape"===e.key||"q"===e.key)x();else if("Tab"===e.key)m();else if("ArrowUp"===e.key)r.value?x():h();else if("ArrowDown"===e.key)r.value?k():m();else if("ArrowLeft"===e.key)r.value?h():x();else if("ArrowRight"===e.key)r.value?m():k();else if("Enter"===e.key)k();else if(" "===e.key)k();else if(e.keyCode>=49&&e.keyCode<=57){const n=Number(String.fromCharCode(e.keyCode));if(Number.isNaN(n))return;const o=w.value[n-1];o&&g(o)}},handleBack:x,mOptions:w,handleOptionClick:g,handleOptionContextmenu:async(e,n)=>{var o;(null==(o=null==e?void 0:e.props)?void 0:o.onContextmenu)&&(null==n||n.preventDefault(),e.props.onContextmenu(e,n))},focus:b,isFocused:()=>document.activeElement!==c.value}}}),Xe={key:0,class:"option-title"},Ye=oe("div",{class:"index-wrap"},[oe("div",{style:{transform:"scale(0.7)"}},[oe("div",{class:"css-arrow left"})])],-1),Ze={key:0,class:"option-split"};const en=ne(Je,[["render",function(e,n,o,t,i,r){const l=ve("QOptionItem"),a=Te;return e.mVisible||e.isStatic?(Q(),J("div",{key:0,class:ae(["quick-options _scrollbar_mini",{_absolute:!e.isStatic,_s:e.isStatic,horizontal:e.horizontal,"vp-panel":!e.horizontal&&!e.isStatic}]),onKeydown:n[2]||(n[2]=le(((...n)=>e.handleKeyPress&&e.handleKeyPress(...n)),["stop"])),tabindex:"0",ref:"quickRootRef"},[e.title?(Q(),J("div",Xe,[X(Y(e.title)+" ",1),oe("button",{class:"btn-no-style",onClick:n[0]||(n[0]=n=>e.mVisible=!1)},"×")])):ee("",!0),e.menuStack.length?(Q(),J("div",{key:1,class:"option-item vp-bg _back clickable",onClick:n[1]||(n[1]=(...n)=>e.handleBack&&e.handleBack(...n))},[Ye,X(" Back (q) ")])):ee("",!0),(Q(!0),J(N,null,fe(e.mOptions,((n,o)=>(Q(),J(N,{key:o},[n.split?(Q(),J("div",Ze)):n.dropdown?(Q(),he(a,{key:1,options:n.dropdown,"label-field":"label","key-field":"key",size:"small"},{default:me((()=>[te(l,{item:n,index:o,"cur-index":e.curIndex,"item-cls":e.itemCls,"show-index":e.showIndex,onClick:o=>e.handleOptionClick(n,o),onContextmenu:o=>e.handleOptionContextmenu(n,o),onOnArrowClick:o=>e.handleOptionClick(n,o,!0)},null,8,["item","index","cur-index","item-cls","show-index","onClick","onContextmenu","onOnArrowClick"])])),_:2},1032,["options"])):(Q(),he(l,{key:2,item:n,index:o,"cur-index":e.curIndex,"item-cls":e.itemCls,"show-index":e.showIndex,onClick:o=>e.handleOptionClick(n,o),onContextmenu:o=>e.handleOptionContextmenu(n,o),onOnArrowClick:o=>e.handleOptionClick(n,o,!0)},null,8,["item","index","cur-index","item-cls","show-index","onClick","onContextmenu","onOnArrowClick"]))],64)))),128))],34)):ee("",!0)}]]);export{en as Q};
