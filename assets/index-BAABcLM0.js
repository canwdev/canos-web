import{_ as e}from"./index-xF8xbv1_.js";import{r as a,M as r,d as s,bl as o,by as t,D as n,_ as l,o as i,c as d,b as u,S as c,U as f,g as p,Y as m,a_ as h}from"./index-Djll9IJd.js";import{_ as v}from"./Input-DRw8NDny.js";import"./VueRender.vue_vue_type_script_lang-DjABlx-x.js";const b=s({name:"IframeBrowser",components:{QuickOptions:e},props:{visible:{type:Boolean,default:!1}},setup(e,{emit:s}){const l=o(e,s,"visible"),i=a(!1),d=a(),u=a(""),c=t("pagecraft_iframe_browser_url",""),f=n((()=>i.value?"(Loading...)":""));r((()=>{c.value&&p()}));const p=()=>{u.value="",u.value=c.value,i.value=!0},{options:m}=(({fetchFn:e,mapFn:s})=>{const o=a([]),t=(e=[],a=[])=>(e.forEach((e=>{const r={children:e.children?t(e.children):void 0,...s(e)};a.push(r)})),a),n=async()=>{const a=await e();o.value=t(a)};return r(n),{options:o,traverse:t,loadOptions:n}})({fetchFn:async()=>{const e=await fetch("./bookmarks.json");return await e.json()},mapFn:e=>({label:"ðŸŒŽ "+(e.label||e.value),value:e.value,props:{onClick:e.children?void 0:()=>{c.value=e.value,p()}}})}),h=a(!1);return{mVisible:l,iframeRef:d,iframeSrc:u,addressBarUrl:c,handleGo:p,handleIframeLoad:()=>{i.value=!1},handleIframeError:e=>{i.value=!1,console.error("[handleIframeError]",e)},titleText:f,shortcutList:m,showShortcuts:h}}}),w={class:"iframe-browser-inner-wrap"},_={class:"iframe-browser-address-bar-wrap"},y={class:"button-wrap"},I=["src"];const S=l(b,[["render",function(a,r,s,o,t,n){const l=h,b=e,S=v;return i(),d("div",w,[u("div",_,[u("div",y,[c(l,{size:"tiny",onClick:r[0]||(r[0]=e=>a.showShortcuts=!0)},{default:f((()=>[p("@")])),_:1}),c(b,{options:a.shortcutList,visible:a.showShortcuts,"onUpdate:visible":r[1]||(r[1]=e=>a.showShortcuts=e),title:"Shortcuts"},null,8,["options","visible"])]),c(S,{class:"iframe-browser-input font-code",size:"tiny",value:a.addressBarUrl,"onUpdate:value":r[2]||(r[2]=e=>a.addressBarUrl=e),placeholder:"input url (https://)",type:"text",onKeyup:r[3]||(r[3]=m((e=>a.handleGo()),["enter"]))},null,8,["value"]),c(l,{size:"tiny",onClick:r[4]||(r[4]=e=>a.handleGo())},{default:f((()=>[p("Go")])),_:1})]),u("iframe",{ref:"iframeRef",onLoad:r[5]||(r[5]=(...e)=>a.handleIframeLoad&&a.handleIframeLoad(...e)),onError:r[6]||(r[6]=(...e)=>a.handleIframeError&&a.handleIframeError(...e)),class:"iframe-browser-inner-iframe",src:a.iframeSrc,frameborder:"0"},null,40,I)])}],["__scopeId","data-v-441f0779"]]);export{S as default};
