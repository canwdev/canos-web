import{aI as U,aE as S,aF as T,aK as J,aQ as X,d as z,c as W,aR as N,aP as w,aO as F,aG as a,T as Re,ai as B,am as O,$ as me,aJ as ve,aL as $,b1 as le,bb as Ne,al as Be,bc as Oe,bd as re,be as ue,aT as ye,r as q,aU as he,G as ee,o as ge,j as be,g as Ke,aN as ke,bf as Fe,m as Ue,bg as Ye,bh as Ve,bi as Ge,a$ as _e,bj as Z,aM as He}from"./index-362206a9.js";import{u as Q,a as D,G as L}from"./music-d3f39c51.js";import{_ as Ce}from"./Slider-321ef0ee.js";import{_ as $e}from"./Space-0034a023.js";import{_ as qe,e as je}from"./Input-6da7108d.js";import"./use-compitable-95c2111f.js";const We={name:"CoverDisplay",props:{src:{type:String,default:null},isRounded:{type:Boolean,default:!1},isRotating:{type:Boolean,default:!1},isShowIcon:{type:Boolean,default:!0}}},ze={class:"cover-display"},Je=["src"],Xe={key:1,class:"material-icons"};function Qe(e,t,o,m,c,l){return S(),T("div",ze,[o.src?(S(),T("img",{key:0,src:o.src,class:J({rounded:o.isRounded,rotating:o.isRotating})},null,10,Je)):o.isShowIcon?(S(),T("span",Xe,"audiotrack")):X("",!0)])}const we=U(We,[["render",Qe],["__scopeId","data-v-e94aa32d"]]),x={LYRIC:"LYRIC",METADATA:"METADATA"},Ze=z({name:"MusicDetail",components:{CoverDisplay:we},data(){return{currentDetailTab:x.LYRIC,DetailTabEnum:x,detailTabList:[{label:this.$t("lyric"),value:x.LYRIC},{label:this.$t("metadata"),value:x.METADATA}],isShowDetail:!1,isShowLyricSearch:!1,isLyricLock:!1,lyricObj:null,isShowPlaybackRate:!1,isShowCountdownConfig:!1}},setup(){const e=Q();return{musicStore:e,musicItem:W(()=>e.musicItem),jumpForward(){D.emit(L.ACTION_CHANGE_CURRENT_TIME,e.currentTime+=5)},jumpBackward(){D.emit(L.ACTION_CHANGE_CURRENT_TIME,e.currentTime-=5)},handlePlaybackRateChange(t){e.playbackRate=Number(t)}}}});const te=e=>(re("data-v-c5063e15"),e=e(),ue(),e),xe={key:0,class:"music-detail"},et={class:"cover-wrap"},tt={class:"detail-content bg-dark"},st={class:"tab-wrap"},nt=["onClick"],ot={class:"lyric-content"},at={class:"lyric-lock"},it=["title"],lt=te(()=>a("i",{class:"material-icons"},"search",-1)),rt=[lt],ut=["title"],ct={class:"material-icons"},dt=["value","placeholder"],pt={class:"below-wrap"},ft={class:"title"},_t={class:"subtitle"},mt={class:"subtitle"},vt={class:"actions-wrap"},yt=te(()=>a("i",{class:"material-icons"},"replay_5",-1)),ht=[yt],gt=["title"],bt=te(()=>a("i",{class:"material-icons"},"speed",-1)),kt=[bt],Ct=te(()=>a("i",{class:"material-icons"},"forward_5",-1)),$t=[Ct];function wt(e,t,o,m,c,l){const u=N("CoverDisplay"),E=Ne,I=Be,v=Ce,h=$e,R=Oe;return e.musicItem?(S(),T("div",xe,[w(E,{class:"cover-wrap-box"},{default:F(()=>[a("div",et,[w(u,{class:"big-cover",src:e.musicItem.cover,"is-rotating":!1,"is-rounded":!1,"is-show-icon":!1,onClick:t[0]||(t[0]=f=>e.isShowDetail=!0)},null,8,["src"]),w(Re,{name:"fade"},{default:F(()=>[B(a("div",tt,[a("div",st,[(S(!0),T(me,null,ve(e.detailTabList,f=>(S(),T("button",{key:f.value,class:J([{active:e.currentDetailTab===f.value},"btn-no-style"]),onClick:G=>e.currentDetailTab=f.value},$(f.label),11,nt))),128))]),B(a("div",ot,[a("div",at,[a("button",{class:"btn-no-style",title:e.$t("search-lyric"),onClick:t[1]||(t[1]=f=>e.isShowLyricSearch=!0)},rt,8,it),a("button",{class:"btn-no-style",title:e.$t("lock-lyric"),onClick:t[2]||(t[2]=f=>e.isLyricLock=!e.isLyricLock)},[a("i",ct,$(e.isLyricLock?"lock":"lock_open"),1)],8,ut)]),a("div",{class:"lrc-main no-lyric",onClick:t[3]||(t[3]=f=>e.isShowDetail=!1)},$(e.$t("msg.no-lyric"))+" TBD ",1)],512),[[O,e.currentDetailTab===e.DetailTabEnum.LYRIC]]),B(a("textarea",{class:"metadata",cols:"30",rows:"15",readonly:"",value:JSON.stringify(e.musicItem,null,2),placeholder:e.$t("msg.no-data")},null,8,dt),[[O,e.currentDetailTab===e.DetailTabEnum.METADATA]])],512),[[O,e.isShowDetail]])]),_:1})])]),_:1}),a("div",pt,[a("div",{class:J(["titles-wrap",{opacity:e.isShowDetail}]),onClick:t[4]||(t[4]=f=>e.isShowDetail=!e.isShowDetail)},[a("div",ft,$(e.musicItem.titleDisplay),1),a("div",_t,$(e.musicItem.artisDisplay),1),a("div",mt,$(e.musicItem.album),1)],2),a("div",vt,[a("button",{class:"btn-no-style",onClick:t[5]||(t[5]=(...f)=>e.jumpBackward&&e.jumpBackward(...f))},ht),a("button",{class:"btn-no-style",title:e.$t("playback-speed"),onClick:t[6]||(t[6]=f=>e.isShowPlaybackRate=!0)},kt,8,gt),a("button",{class:"btn-no-style",onClick:t[7]||(t[7]=(...f)=>e.jumpForward&&e.jumpForward(...f))},$t)])]),w(R,{show:e.isShowPlaybackRate,"onUpdate:show":t[11]||(t[11]=f=>e.isShowPlaybackRate=f),preset:"dialog","show-icon":!1,title:e.$t("playback-speed")},{default:F(()=>[w(h,{align:"center"},{default:F(()=>[w(I,{onClick:t[8]||(t[8]=f=>e.handlePlaybackRateChange(1))},{default:F(()=>[le("重置")]),_:1}),w(v,{style:{width:"200px"},value:e.musicStore.playbackRate,"onUpdate:value":[t[9]||(t[9]=f=>e.musicStore.playbackRate=f),t[10]||(t[10]=f=>e.handlePlaybackRateChange(e.musicStore.playbackRate))],step:"marks",max:2,min:.2,marks:{.2:"0.2",.5:"0.5",1:"1",1.2:"1.2",1.5:"1.5",2:"2"}},null,8,["value"])]),_:1})]),_:1},8,["show","title"]),w(R,{show:e.isShowLyricSearch,"onUpdate:show":t[12]||(t[12]=f=>e.isShowLyricSearch=f),preset:"dialog","show-icon":!1,title:"Search Lyric"},{default:F(()=>[le("TBD ")]),_:1},8,["show"])])):X("",!0)}const St=U(Ze,[["render",wt],["__scopeId","data-v-c5063e15"]]),It=z({name:"PlayerCore",props:{show:{type:Boolean,default:!1}},setup(){const{t:e}=ye(),t=q(),o=Q(),m=he(),c=q(),l=()=>{t.value.play()},u=()=>{t.value.pause()},E=()=>{o.playPrev()},I=()=>{o.playNext()},v=()=>{!t.value||!t.value.src||(t.value.paused?l():u())},h=C=>{"mediaSession"in navigator&&(navigator.mediaSession.setActionHandler("play",l),navigator.mediaSession.setActionHandler("pause",u),navigator.mediaSession.setActionHandler("previoustrack",E),navigator.mediaSession.setActionHandler("nexttrack",I)),C.addEventListener("play",()=>{o.paused=!1,o.isLoadedAutoplay=!0}),C.addEventListener("pause",()=>{o.paused=!0,o.isLoadedAutoplay=!1}),C.addEventListener("ended",()=>{o.handlePlayEnded()}),C.addEventListener("canplay",A=>{o.duration=A.target.duration,o.isLoadedAutoplay&&l()}),C.addEventListener("timeupdate",A=>{o.currentTime=A.target.currentTime}),C.addEventListener("error",A=>{console.error(A),window.$message.error(e("msg.load-fail-or-no-supported-source"))})},R=C=>{t.value&&(t.value.currentTime=C)},f=C=>{t.value&&(t.value.volume=C/100)},G=(C=1)=>{if(t.value)try{t.value.playbackRate=C}catch(A){window.$message.error(A.message)}};return ee(()=>m.audioVolume,f),ee(()=>o.playbackRate,G),ee(()=>o.musicItem,async C=>{C||(c.value=void 0),await C.fetchDetail(),c.value=C.src}),ge(()=>{D.on(L.ACTION_TOGGLE_PLAY,v),D.on(L.ACTION_PLAY,l),D.on(L.ACTION_PAUSE,u),D.on(L.ACTION_CHANGE_CURRENT_TIME,R),h(t.value),f(m.audioVolume),G(o.playbackRate)}),be(()=>{D.off(L.ACTION_TOGGLE_PLAY,v),D.off(L.ACTION_PLAY,l),D.off(L.ACTION_PAUSE,u),D.off(L.ACTION_CHANGE_CURRENT_TIME,R)}),{audioRef:t,musicStore:o,audioSrc:c}}});const Tt={class:"player-core"},Mt=["src"];function Pt(e,t,o,m,c,l){return B((S(),T("div",Tt,[a("audio",{ref:"audioRef",src:e.audioSrc,controls:""},null,8,Mt)],512)),[[O,e.show]])}const Et=U(It,[["render",Pt],["__scopeId","data-v-1a61c9d8"]]);const At={name:"CoverMini",components:{CoverDisplay:we},props:{iconName:{type:String,default:"audiotrack"},src:{type:String,default:null}}},Dt={class:"btn-no-style btn-cover flex items-center justify-center"},Lt={key:1,class:"material-icons"};function Rt(e,t,o,m,c,l){const u=N("CoverDisplay");return S(),T("button",Dt,[Ke(e.$slots,"default",{},void 0,!0),o.src?(S(),ke(u,{key:0,src:o.src},null,8,["src"])):(S(),T("i",Lt,$(o.iconName),1))])}const Se=U(At,[["render",Rt],["__scopeId","data-v-c9457739"]]);const Nt={name:"TkSeekbar",props:{min:{type:[Number,String],default:0},max:{type:[Number,String],default:100},value:{type:[Number,String],default:100},vertical:{type:Boolean,default:!1},wheel:{type:Boolean,default:!1}},emits:["input","focus","blur","change"],computed:{progress(){return(this.value/this.max*100).toFixed(1)}},methods:{handleInput(e){this.$emit("input",e.target.value)},handleFocus(e){this.$emit("focus",e)},handleBlur(e){this.$emit("blur",e)},handleChange(e){this.$emit("change",e.target.value)},handleWheel(e){if(this.wheel){e.preventDefault();const t=this.$refs.seekBar,o=e.deltaY||0,m=Math.abs(o)/64;o>0?t.value=this.value-m:o<0&&(t.value=this.value+m),this.$emit("input",t.value)}}}},Bt=["min","max","value"];function Ot(e,t,o,m,c,l){return S(),T("div",{class:J(["tk-seekbar",{vertical:o.vertical}])},[o.vertical?X("",!0):(S(),T("div",{key:0,class:"seekbar-fill",style:Fe("width:"+l.progress+"%")},null,4)),a("input",Ue({ref:"seekBar",type:"range",min:o.min,max:o.max,value:o.value,class:"common-seekbar seekbar-input"},e.$attrs,{onInput:t[0]||(t[0]=(...u)=>l.handleInput&&l.handleInput(...u)),onFocus:t[1]||(t[1]=(...u)=>l.handleFocus&&l.handleFocus(...u)),onBlur:t[2]||(t[2]=(...u)=>l.handleBlur&&l.handleBlur(...u)),onChange:t[3]||(t[3]=(...u)=>l.handleChange&&l.handleChange(...u)),onWheel:t[4]||(t[4]=(...u)=>l.handleWheel&&l.handleWheel(...u))}),null,16,Bt)],2)}const Kt=U(Nt,[["render",Ot],["__scopeId","data-v-fc3749d0"]]);var Ie={exports:{}};(function(e){(function(t,o,m){if(!t)return;for(var c={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},l={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},u={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},E={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},I,v=1;v<20;++v)c[111+v]="f"+v;for(v=0;v<=9;++v)c[v+96]=v.toString();function h(s,n,d){if(s.addEventListener){s.addEventListener(n,d,!1);return}s.attachEvent("on"+n,d)}function R(s){if(s.type=="keypress"){var n=String.fromCharCode(s.which);return s.shiftKey||(n=n.toLowerCase()),n}return c[s.which]?c[s.which]:l[s.which]?l[s.which]:String.fromCharCode(s.which).toLowerCase()}function f(s,n){return s.sort().join(",")===n.sort().join(",")}function G(s){var n=[];return s.shiftKey&&n.push("shift"),s.altKey&&n.push("alt"),s.ctrlKey&&n.push("ctrl"),s.metaKey&&n.push("meta"),n}function C(s){if(s.preventDefault){s.preventDefault();return}s.returnValue=!1}function A(s){if(s.stopPropagation){s.stopPropagation();return}s.cancelBubble=!0}function r(s){return s=="shift"||s=="ctrl"||s=="alt"||s=="meta"}function se(){if(!I){I={};for(var s in c)s>95&&s<112||c.hasOwnProperty(s)&&(I[c[s]]=s)}return I}function Me(s,n,d){return d||(d=se()[s]?"keydown":"keypress"),d=="keypress"&&n.length&&(d="keydown"),d}function Pe(s){return s==="+"?["+"]:(s=s.replace(/\+{2}/g,"+plus"),s.split("+"))}function ce(s,n){var d,k,Y,H=[];for(d=Pe(s),Y=0;Y<d.length;++Y)k=d[Y],E[k]&&(k=E[k]),n&&n!="keypress"&&u[k]&&(k=u[k],H.push("shift")),r(k)&&H.push(k);return n=Me(k,H,n),{key:k,modifiers:H,action:n}}function de(s,n){return s===null||s===o?!1:s===n?!0:de(s.parentNode,n)}function M(s){var n=this;if(s=s||o,!(n instanceof M))return new M(s);n.target=s,n._callbacks={},n._directMap={};var d={},k,Y=!1,H=!1,ne=!1;function oe(i){i=i||{};var _=!1,g;for(g in d){if(i[g]){_=!0;continue}d[g]=0}_||(ne=!1)}function pe(i,_,g,p,b,K){var y,P,j=[],V=g.type;if(!n._callbacks[i])return[];for(V=="keyup"&&r(i)&&(_=[i]),y=0;y<n._callbacks[i].length;++y)if(P=n._callbacks[i][y],!(!p&&P.seq&&d[P.seq]!=P.level)&&V==P.action&&(V=="keypress"&&!g.metaKey&&!g.ctrlKey||f(_,P.modifiers))){var De=!p&&P.combo==b,Le=p&&P.seq==p&&P.level==K;(De||Le)&&n._callbacks[i].splice(y,1),j.push(P)}return j}function ae(i,_,g,p){n.stopCallback(_,_.target||_.srcElement,g,p)||i(_,g)===!1&&(C(_),A(_))}n._handleKey=function(i,_,g){var p=pe(i,_,g),b,K={},y=0,P=!1;for(b=0;b<p.length;++b)p[b].seq&&(y=Math.max(y,p[b].level));for(b=0;b<p.length;++b){if(p[b].seq){if(p[b].level!=y)continue;P=!0,K[p[b].seq]=1,ae(p[b].callback,g,p[b].combo,p[b].seq);continue}P||ae(p[b].callback,g,p[b].combo)}var j=g.type=="keypress"&&H;g.type==ne&&!r(i)&&!j&&oe(K),H=P&&g.type=="keydown"};function ie(i){typeof i.which!="number"&&(i.which=i.keyCode);var _=R(i);if(_){if(i.type=="keyup"&&Y===_){Y=!1;return}n.handleKey(_,G(i),i)}}function Ee(){clearTimeout(k),k=setTimeout(oe,1e3)}function Ae(i,_,g,p){d[i]=0;function b(V){return function(){ne=V,++d[i],Ee()}}function K(V){ae(g,V,i),p!=="keyup"&&(Y=R(V)),setTimeout(oe,10)}for(var y=0;y<_.length;++y){var P=y+1===_.length,j=P?K:b(p||ce(_[y+1]).action);fe(_[y],j,p,i,y)}}function fe(i,_,g,p,b){n._directMap[i+":"+g]=_,i=i.replace(/\s+/g," ");var K=i.split(" "),y;if(K.length>1){Ae(i,K,_,g);return}y=ce(i,g),n._callbacks[y.key]=n._callbacks[y.key]||[],pe(y.key,y.modifiers,{type:y.action},p,i,b),n._callbacks[y.key][p?"unshift":"push"]({callback:_,modifiers:y.modifiers,action:y.action,seq:p,level:b,combo:i})}n._bindMultiple=function(i,_,g){for(var p=0;p<i.length;++p)fe(i[p],_,g)},h(s,"keypress",ie),h(s,"keydown",ie),h(s,"keyup",ie)}M.prototype.bind=function(s,n,d){var k=this;return s=s instanceof Array?s:[s],k._bindMultiple.call(k,s,n,d),k},M.prototype.unbind=function(s,n){var d=this;return d.bind.call(d,s,function(){},n)},M.prototype.trigger=function(s,n){var d=this;return d._directMap[s+":"+n]&&d._directMap[s+":"+n]({},s),d},M.prototype.reset=function(){var s=this;return s._callbacks={},s._directMap={},s},M.prototype.stopCallback=function(s,n){var d=this;if((" "+n.className+" ").indexOf(" mousetrap ")>-1||de(n,d.target))return!1;if("composedPath"in s&&typeof s.composedPath=="function"){var k=s.composedPath()[0];k!==s.target&&(n=k)}return n.tagName=="INPUT"||n.tagName=="SELECT"||n.tagName=="TEXTAREA"||n.isContentEditable},M.prototype.handleKey=function(){var s=this;return s._handleKey.apply(s,arguments)},M.addKeycodes=function(s){for(var n in s)s.hasOwnProperty(n)&&(c[n]=s[n]);I=null},M.init=function(){var s=M(o);for(var n in s)n.charAt(0)!=="_"&&(M[n]=function(d){return function(){return s[d].apply(s,arguments)}}(n))},M.init(),t.Mousetrap=M,e.exports&&(e.exports=M),typeof m=="function"&&m.amd&&m(function(){return M})})(typeof window<"u"?window:null,typeof window<"u"?document:null)})(Ie);var Ft=Ie.exports;const Ut=Ye(Ft),Yt="space",Vt=["left","pageup","k","l"],Gt=["right","pagedown","h","j"],Ht="up",qt="down",jt=z({name:"MusicControl",components:{TkSeekbar:Kt,CoverMini:Se},emits:["onCoverClick","onTitleClick"],setup(){const{t:e}=ye(),t=Q(),o=he(),m=q(0),c=q(!1),l=q(!1),u=Ve(),E=r=>{r.preventDefault(),D.emit(L.ACTION_TOGGLE_PLAY)},I=()=>{t.playPrev()},v=()=>{t.playNext()},h=r=>{r.preventDefault(),o.volumeUp()},R=r=>{r.preventDefault(),o.volumeDown()},f=()=>{let r=Z.findIndex(se=>se===o.loopMode);++r,r>Z.length-1&&(r=0),Z[r]&&(o.loopMode=Z[r],window.$message.info(e(A.value.i18nKey)))},G=r=>{c.value=!0,m.value=Number(r)},C=r=>{r=Number(r),D.emit(L.ACTION_CHANGE_CURRENT_TIME,r),c.value=!1},A=W(()=>_e[o.loopMode]);return ge(()=>{const r=new Ut;r.bind(Yt,E),r.bind(Vt,I),r.bind(Gt,v),r.bind("ctrl+x",f),r.bind(Ht,h),r.bind(qt,R),u.value=r}),be(()=>{u.value&&u.value.reset()}),ee(()=>t.currentTime,r=>{c.value||(m.value=r)}),{formatTimeHMS:Ge,loopModeMap:_e,mCurrentTime:m,isSeeking:c,isDisabled:l,musicStore:t,settingsStore:o,musicItem:W(()=>t.musicItem),togglePlay:E,previous:I,next:v,volumeUpFn:h,volumeDownFn:R,switchLoopMode:f,currentLoopMode:A,progressSeeking:G,progressChange:C,volumeIcon:W(()=>{const r=o.audioVolume;if(r>50)return"volume_up";if(r<50){if(r==0)return"volume_off";if(r<10)return"volume_mute"}return"volume_down"})}}});const Te=e=>(re("data-v-7e86e446"),e=e(),ue(),e),Wt={key:0,class:"actionbar-wrapper"},zt={class:"progressbar"},Jt={class:"time text-overflow"},Xt={class:"time text-overflow"},Qt={class:"actionbar"},Zt={class:"title text-overflow"},xt={class:"buttons-scroll"},es=["disabled","title"],ts=Te(()=>a("i",{class:"material-icons"},"skip_previous",-1)),ss=[ts],ns=["disabled","title"],os={class:"material-icons"},as={class:"material-icons"},is=["disabled","title"],ls=Te(()=>a("i",{class:"material-icons"},"skip_next",-1)),rs=[ls],us=["title"],cs=["title"],ds={class:"material-icons"},ps={style:{display:"flex","align-items":"center","flex-direction":"column"}},fs={style:{"font-size":"12px"}};function _s(e,t,o,m,c,l){const u=N("TkSeekbar"),E=N("CoverMini"),I=Ce,v=qe;return e.musicItem?(S(),T("div",Wt,[a("div",zt,[a("span",Jt,$(e.formatTimeHMS(e.mCurrentTime)),1),w(u,{max:e.musicStore.duration,value:e.mCurrentTime,onInput:e.progressSeeking,onChange:e.progressChange},null,8,["max","value","onInput","onChange"]),a("span",Xt,$(e.formatTimeHMS(e.musicStore.duration)),1)]),a("div",Qt,[w(E,{src:e.musicItem.cover,"icon-name":"audiotrack",onClick:t[0]||(t[0]=h=>e.$emit("onCoverClick"))},null,8,["src"]),a("button",{class:"btn-song-info btn-no-style",onClick:t[1]||(t[1]=h=>e.$emit("onTitleClick"))},[a("span",Zt,$(e.musicItem.titleDisplay),1),B(a("span",{class:"artist text-overflow"},$(e.musicItem.artist),513),[[O,e.musicItem.artist]]),B(a("span",{class:"album text-overflow"},$(e.musicItem.album),513),[[O,e.musicItem.album]])]),a("div",xt,[a("button",{disabled:e.isDisabled,class:"btn-action btn-no-style",title:e.$t("previous"),onClick:t[2]||(t[2]=(...h)=>e.previous&&e.previous(...h))},ss,8,es),a("button",{disabled:e.isDisabled,class:"btn-action btn-no-style",title:e.musicStore.paused?e.$t("play"):e.$t("pause"),onClick:t[3]||(t[3]=(...h)=>e.togglePlay&&e.togglePlay(...h))},[B(a("i",os,"play_arrow",512),[[O,e.musicStore.paused]]),B(a("i",as,"pause",512),[[O,!e.musicStore.paused]])],8,ns),a("button",{disabled:e.isDisabled,class:"btn-action btn-no-style",title:e.$t("next"),onClick:t[4]||(t[4]=(...h)=>e.next&&e.next(...h))},rs,8,is),e.currentLoopMode?(S(),T("button",{key:0,class:"btn-action btn-no-style",title:e.$t(e.currentLoopMode.i18nKey),onClick:t[5]||(t[5]=(...h)=>e.switchLoopMode&&e.switchLoopMode(...h))},[a("i",{class:J(["material-icons",e.currentLoopMode.className])},$(e.currentLoopMode.icon),3)],8,us)):X("",!0),w(v,{placement:"top",trigger:"click"},{trigger:F(()=>[a("button",{class:"btn-action btn-no-style",title:e.$t("volume")},[a("i",ds,$(e.volumeIcon),1)],8,cs)]),default:F(()=>[a("div",ps,[w(I,{vertical:"",style:{height:"100px"},max:100,tooltip:!1,value:e.settingsStore.audioVolume,"onUpdate:value":t[6]||(t[6]=h=>e.settingsStore.audioVolume=h)},null,8,["value"]),a("span",fs,$(e.settingsStore.audioVolume),1)])]),_:1})])])])):X("",!0)}const ms=U(jt,[["render",_s],["__scopeId","data-v-7e86e446"]]),vs=z({name:"PlaylistItem",components:{CoverMini:Se},props:{item:{type:Object,required:!0}},setup(e,{emit:t}){const{item:o}=He(e),m=Q();return{musicStore:m,statusIconName:W(()=>{var c;return o.value.guid===((c=m.musicItem)==null?void 0:c.guid)?m.paused?"pause":"play_arrow":""})}}});const ys=e=>(re("data-v-9c6cbe9f"),e=e(),ue(),e),hs={class:"playlist-item"},gs={class:"item-left"},bs={class:"material-icons status-icon"},ks={class:"item-main"},Cs={class:"item-title"},$s={class:"item-subtitle"},ws=ys(()=>a("div",{class:"item-right"},null,-1));function Ss(e,t,o,m,c,l){const u=N("CoverMini");return S(),T("div",hs,[a("div",gs,[a("div",bs,$(e.statusIconName),1),w(u,{src:e.item.cover,"force-show-icon":""},null,8,["src"])]),a("div",ks,[a("div",Cs,$(e.item.titleDisplay),1),a("div",$s,$(e.item.artistsAlbumDisplay),1)]),ws])}const Is=U(vs,[["render",Ss],["__scopeId","data-v-9c6cbe9f"]]),Ts=z({name:"MusicPlaylist",components:{PlaylistItem:Is},setup(){const e=Q(),t=q(""),o=c=>{const l=e.playingList.findIndex(u=>u.guid===c.guid);l||console.error("idx not found!"),e.playByIndex(l)},m=W(()=>{if(!t.value)return e.playingList;const c=new RegExp(t.value,"ig");return e.playingList.filter(l=>(l.titleDisplay,c.test(l.titleDisplay)||c.test(l.artistsAlbumDisplay)))});return{musicStore:e,playlistFiltered:m,filterText:t,handleItemClick:o}}});const Ms={class:"music-play-list"},Ps={class:"music-list"};function Es(e,t,o,m,c,l){const u=je,E=$e,I=N("PlaylistItem");return S(),T("div",Ms,[w(E,{class:"playlist-action-bar"},{default:F(()=>[w(u,{placeholder:e.$t("filter-by-name"),value:e.filterText,"onUpdate:value":t[0]||(t[0]=v=>e.filterText=v),size:"tiny"},null,8,["placeholder","value"]),le(" "+$(e.musicStore.playingIndex+1)+" / "+$(e.musicStore.playingList.length),1)]),_:1}),a("div",Ps,[(S(!0),T(me,null,ve(e.playlistFiltered,v=>(S(),ke(I,{key:v.guid,item:v,onClick:h=>e.handleItemClick(v)},null,8,["item","onClick"]))),128))])])}const As=U(Ts,[["render",Es],["__scopeId","data-v-eecb8f09"]]),Ds=z({name:"MusicPlayer",components:{MusicPlaylist:As,MusicControl:ms,PlayerCore:Et,MusicDetail:St},setup(){return{isShowPlaylist:q(!0)}}});const Ls={class:"music-player-wrap"},Rs={class:"music-above"},Ns={class:"music-below"};function Bs(e,t,o,m,c,l){const u=N("MusicPlaylist"),E=N("MusicDetail"),I=N("MusicControl"),v=N("PlayerCore");return S(),T("div",Ls,[a("div",Rs,[B(w(u,null,null,512),[[O,e.isShowPlaylist]]),B(w(E,null,null,512),[[O,!e.isShowPlaylist]])]),a("div",Ns,[w(I,{onOnCoverClick:t[0]||(t[0]=h=>e.isShowPlaylist=!e.isShowPlaylist),onOnTitleClick:t[1]||(t[1]=h=>e.isShowPlaylist=!e.isShowPlaylist)}),w(v)])])}const Gs=U(Ds,[["render",Bs],["__scopeId","data-v-e3669b96"]]);export{Gs as default};
