import{r as a,O as e,d as s,ag as r,N as t,w as l,y as n,q as o,c as i,b as u,e as p,a as c,m as v,aW as d,l as m,v as f,ah as b,aK as w,p as h,o as k,_}from"./index-CQGI0j3m.js";const y=a=>(h("data-v-f9eabe5d"),a=a(),k(),a),F={class:"iframe-browser-inner-wrap"},g={class:"iframe-browser-address-bar-wrap"},x={class:"button-wrap"},C=[y((()=>u("span",{class:"mdi mdi-star"},null,-1)))],P=[y((()=>u("span",{class:"mdi mdi-arrow-right"},null,-1)))],j=["src"],E=_(s({name:"IframeBrowser",props:{task:{},appParams:{}},emits:["update:visible"],setup(s,{emit:h}){const k=s,{task:_}=r(k),y=a(!1),E=a(),I=a(""),B=t("pagecraft_iframe_browser_url",""),D=()=>{I.value="",I.value=B.value,y.value=!0},K=()=>{window.open(E.value.src)};l((()=>k.appParams),(()=>{if(!k.appParams)return;const{url:a}=k.appParams;a&&(B.value=a,D())}),{immediate:!0});const L=n((()=>y.value?"Loading...":E.value&&E.value.contentDocument?E.value.contentDocument.title:"iFrame Browser"));l(L,(a=>{_.value&&(_.value.title=a)})),e((()=>{B.value&&D()}));const O=()=>{y.value=!1},U=a=>{y.value=!1,console.error("[handleIframeError]",a)},{options:V}=(({fetchFn:s,mapFn:r})=>{const t=a([]),l=(a=[],e=[])=>(a.forEach((a=>{const s={children:a.children?l(a.children):void 0,...r(a)};e.push(s)})),e),n=async()=>{const a=await s();t.value=l(a)};return e(n),{options:t,traverse:l,loadOptions:n}})({fetchFn:async()=>{const a=await fetch("./bookmarks.json");return await a.json()},mapFn:a=>({label:"ðŸŒŽ "+(a.label||a.value),value:a.value,props:{onClick:a.children?void 0:()=>{B.value=a.value,D()}}})}),W=a(!1);return(a,e)=>(o(),i("div",F,[u("div",g,[u("div",x,[u("button",{class:"vp-button",onClick:e[0]||(e[0]=a=>W.value=!0)},C),p(d,{options:c(V),visible:c(W),"onUpdate:visible":e[1]||(e[1]=a=>v(W)?W.value=a:null),title:"Shortcuts"},null,8,["options","visible"])]),m(u("input",{class:"iframe-browser-input vp-input font-code","onUpdate:modelValue":e[2]||(e[2]=a=>v(B)?B.value=a:null),placeholder:"input url (https://)",type:"text",onKeyup:e[3]||(e[3]=b((a=>D()),["enter"]))},null,544),[[f,c(B)]]),u("button",{class:"vp-button",onClick:e[4]||(e[4]=a=>D()),onContextmenu:w(K,["stop"]),title:"Visit Website"},P,32)]),u("iframe",{ref_key:"iframeRef",ref:E,onLoad:O,onError:U,class:"iframe-browser-inner-iframe",src:c(I),frameborder:"0"},null,40,j)]))}}),[["__scopeId","data-v-f9eabe5d"]]);export{E as default};
