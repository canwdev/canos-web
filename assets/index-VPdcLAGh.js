import{C as e,h as n,a as o,_ as t}from"./VueRender.vue_vue_type_script_lang-Jll5Lts-.js";import{r as i,k as r,ci as l,cj as a,cb as d,l as s,aL as u,ck as c,aK as p,d as v,B as f,s as h,h as m,cl as b,D as y,A as w,a6 as x,aW as g,aX as k,aY as S,T as C,a7 as N,ah as R,bF as P,Q as O,F as I,cm as _,cn as z,co as A,cp as $,m as B,aj as F,q as T,ai as K,p as D,I as j,aS as L,J as M,x as E,y as q,cq as H,ax as U,N as V,O as W,cr as G,aB as Q,cs as J,bi as X,ct as Y,o as Z,c as ee,g as ne,t as oe,a as te,f as ie,_ as re,b as le,S as ae,cu as de,cv as se,n as ue,bz as ce,bM as pe,cw as ve,M as fe,$ as he,e as me,Z as be,U as ye,bC as we}from"./index-CKZunzLP.js";function xe(e){return n=>{e.value=n?n.$el:null}}const ge=v({name:"DropdownDivider",props:{clsPrefix:{type:String,required:!0}},render(){return f("div",{class:`${this.clsPrefix}-dropdown-divider`})}}),ke=h("n-dropdown-menu"),Se=h("n-dropdown"),Ce=h("n-dropdown-option");function Ne(e,n){return"submenu"===e.type||void 0===e.type&&void 0!==e[n]}function Re(e){return"divider"===e.type}const Pe=v({name:"DropdownOption",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0},parentKey:{type:[String,Number],default:null},placement:{type:String,default:"right-start"},props:Object,scrollable:Boolean},setup(e){const o=m(Se),{hoverKeyRef:t,keyboardKeyRef:l,lastToggledSubmenuKeyRef:a,pendingKeyPathRef:d,activeKeyPathRef:s,animatedRef:u,mergedShowRef:c,renderLabelRef:p,renderIconRef:v,labelFieldRef:f,childrenFieldRef:h,renderOptionRef:g,nodePropsRef:k,menuPropsRef:S}=o,C=m(Ce,null),N=m(ke),R=m(b),P=y((()=>e.tmNode.rawNode)),O=y((()=>{const{value:n}=h;return Ne(e.tmNode.rawNode,n)})),I=y((()=>{const{disabled:n}=e.tmNode;return n})),_=function(e,n,o){if(!n)return e;const t=i(e.value);let l=null;return r(e,(e=>{null!==l&&window.clearTimeout(l),!0===e?o&&!o.value?t.value=!0:l=window.setTimeout((()=>{t.value=!0}),n):t.value=!1})),t}(y((()=>{if(!O.value)return!1;const{key:n,disabled:o}=e.tmNode;if(o)return!1;const{value:i}=t,{value:r}=l,{value:s}=a,{value:u}=d;return null!==i?u.includes(n):null!==r?u.includes(n)&&u[u.length-1]!==n:null!==s&&u.includes(n)})),300,y((()=>null===l.value&&!u.value))),z=y((()=>!!(null==C?void 0:C.enteringSubmenuRef.value))),A=i(!1);function $(){const{parentKey:n,tmNode:o}=e;o.disabled||c.value&&(a.value=n,l.value=null,t.value=o.key)}return w(Ce,{enteringSubmenuRef:A}),{labelField:f,renderLabel:p,renderIcon:v,siblingHasIcon:N.showIconRef,siblingHasSubmenu:N.hasSubmenuRef,menuProps:S,popoverBody:R,animated:u,mergedShowSubmenu:y((()=>_.value&&!z.value)),rawNode:P,hasSubmenu:O,pending:x((()=>{const{value:n}=d,{key:o}=e.tmNode;return n.includes(o)})),childActive:x((()=>{const{value:n}=s,{key:o}=e.tmNode,t=n.findIndex((e=>o===e));return-1!==t&&t<n.length-1})),active:x((()=>{const{value:n}=s,{key:o}=e.tmNode,t=n.findIndex((e=>o===e));return-1!==t&&t===n.length-1})),mergedDisabled:I,renderOption:g,nodeProps:k,handleClick:function(){const{value:n}=O,{tmNode:t}=e;c.value&&(n||t.disabled||(o.doSelect(t.key,t.rawNode),o.doUpdateShow(!1)))},handleMouseMove:function(){const{tmNode:n}=e;n.disabled||c.value&&t.value!==n.key&&$()},handleMouseEnter:$,handleMouseLeave:function(o){if(e.tmNode.disabled)return;if(!c.value)return;const{relatedTarget:i}=o;!i||n({target:i},"dropdownOption")||n({target:i},"scrollbarRail")||(t.value=null)},handleSubmenuBeforeEnter:function(){A.value=!0},handleSubmenuAfterEnter:function(){A.value=!1}}},render(){var n,o;const{animated:t,rawNode:i,mergedShowSubmenu:r,clsPrefix:l,siblingHasIcon:a,siblingHasSubmenu:d,renderLabel:s,renderIcon:u,renderOption:c,nodeProps:p,props:v,scrollable:h}=this;let m=null;if(r){const e=null===(n=this.menuProps)||void 0===n?void 0:n.call(this,i,i.children);m=f(ze,Object.assign({},e,{clsPrefix:l,scrollable:this.scrollable,tmNodes:this.tmNode.children,parentKey:this.tmNode.key}))}const b={class:[`${l}-dropdown-option-body`,this.pending&&`${l}-dropdown-option-body--pending`,this.active&&`${l}-dropdown-option-body--active`,this.childActive&&`${l}-dropdown-option-body--child-active`,this.mergedDisabled&&`${l}-dropdown-option-body--disabled`],onMousemove:this.handleMouseMove,onMouseenter:this.handleMouseEnter,onMouseleave:this.handleMouseLeave,onClick:this.handleClick},y=null==p?void 0:p(i),w=f("div",Object.assign({class:[`${l}-dropdown-option`,null==y?void 0:y.class],"data-dropdown-option":!0},y),f("div",N(b,v),[f("div",{class:[`${l}-dropdown-option-body__prefix`,a&&`${l}-dropdown-option-body__prefix--show-icon`]},[u?u(i):R(i.icon)]),f("div",{"data-dropdown-option":!0,class:`${l}-dropdown-option-body__label`},s?s(i):R(null!==(o=i[this.labelField])&&void 0!==o?o:i.title)),f("div",{"data-dropdown-option":!0,class:[`${l}-dropdown-option-body__suffix`,d&&`${l}-dropdown-option-body__suffix--has-submenu`]},this.hasSubmenu?f(P,null,{default:()=>f(e,null)}):null)]),this.hasSubmenu?f(g,null,{default:()=>[f(k,null,{default:()=>f("div",{class:`${l}-dropdown-offset-container`},f(S,{show:this.mergedShowSubmenu,placement:this.placement,to:h&&this.popoverBody||void 0,teleportDisabled:!h},{default:()=>f("div",{class:`${l}-dropdown-menu-wrapper`},t?f(C,{onBeforeEnter:this.handleSubmenuBeforeEnter,onAfterEnter:this.handleSubmenuAfterEnter,name:"fade-in-scale-up-transition",appear:!0},{default:()=>m}):m)}))})]}):null);return c?c({node:w,option:i}):w}}),Oe=v({name:"DropdownGroupHeader",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(){const{showIconRef:e,hasSubmenuRef:n}=m(ke),{renderLabelRef:o,labelFieldRef:t,nodePropsRef:i,renderOptionRef:r}=m(Se);return{labelField:t,showIcon:e,hasSubmenu:n,renderLabel:o,nodeProps:i,renderOption:r}},render(){var e;const{clsPrefix:n,hasSubmenu:o,showIcon:t,nodeProps:i,renderLabel:r,renderOption:l}=this,{rawNode:a}=this.tmNode,d=f("div",Object.assign({class:`${n}-dropdown-option`},null==i?void 0:i(a)),f("div",{class:`${n}-dropdown-option-body ${n}-dropdown-option-body--group`},f("div",{"data-dropdown-option":!0,class:[`${n}-dropdown-option-body__prefix`,t&&`${n}-dropdown-option-body__prefix--show-icon`]},R(a.icon)),f("div",{class:`${n}-dropdown-option-body__label`,"data-dropdown-option":!0},r?r(a):R(null!==(e=a.title)&&void 0!==e?e:a[this.labelField])),f("div",{class:[`${n}-dropdown-option-body__suffix`,o&&`${n}-dropdown-option-body__suffix--has-submenu`],"data-dropdown-option":!0})));return l?l({node:d,option:a}):d}}),Ie=v({name:"NDropdownGroup",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0},parentKey:{type:[String,Number],default:null}},render(){const{tmNode:e,parentKey:n,clsPrefix:o}=this,{children:t}=e;return f(I,null,f(Oe,{clsPrefix:o,tmNode:e,key:e.key}),null==t?void 0:t.map((e=>{const{rawNode:t}=e;return!1===t.show?null:Re(t)?f(ge,{clsPrefix:o,key:e.key}):e.isGroup?(O("dropdown","`group` node is not allowed to be put in `group` node."),null):f(Pe,{clsPrefix:o,tmNode:e,parentKey:n,key:e.key})})))}}),_e=v({name:"DropdownRenderOption",props:{tmNode:{type:Object,required:!0}},render(){const{rawNode:{render:e,props:n}}=this.tmNode;return f("div",n,[null==e?void 0:e()])}}),ze=v({name:"DropdownMenu",props:{scrollable:Boolean,showArrow:Boolean,arrowStyle:[String,Object],clsPrefix:{type:String,required:!0},tmNodes:{type:Array,default:()=>[]},parentKey:{type:[String,Number],default:null}},setup(e){const{renderIconRef:n,childrenFieldRef:o}=m(Se);w(ke,{showIconRef:y((()=>{const o=n.value;return e.tmNodes.some((e=>{var n;if(e.isGroup)return null===(n=e.children)||void 0===n?void 0:n.some((({rawNode:e})=>o?o(e):e.icon));const{rawNode:t}=e;return o?o(t):t.icon}))})),hasSubmenuRef:y((()=>{const{value:n}=o;return e.tmNodes.some((e=>{var o;if(e.isGroup)return null===(o=e.children)||void 0===o?void 0:o.some((({rawNode:e})=>Ne(e,n)));const{rawNode:t}=e;return Ne(t,n)}))}))});const t=i(null);return w(_,null),w(z,null),w(b,t),{bodyRef:t}},render(){const{parentKey:e,clsPrefix:n,scrollable:o}=this,t=this.tmNodes.map((t=>{const{rawNode:i}=t;return!1===i.show?null:function(e){return"render"===e.type}(i)?f(_e,{tmNode:t,key:t.key}):Re(i)?f(ge,{clsPrefix:n,key:t.key}):function(e){return"group"===e.type}(i)?f(Ie,{clsPrefix:n,tmNode:t,parentKey:e,key:t.key}):f(Pe,{clsPrefix:n,tmNode:t,parentKey:e,key:t.key,props:i.props,scrollable:o})}));return f("div",{class:[`${n}-dropdown-menu`,o&&`${n}-dropdown-menu--scrollable`],ref:"bodyRef"},o?f($,{contentClass:`${n}-dropdown-menu__content`},{default:()=>t}):t,this.showArrow?A({clsPrefix:n,arrowStyle:this.arrowStyle,arrowClass:void 0,arrowWrapperClass:void 0,arrowWrapperStyle:void 0}):null)}}),Ae=B("dropdown-menu","\n transform-origin: var(--v-transform-origin);\n background-color: var(--n-color);\n border-radius: var(--n-border-radius);\n box-shadow: var(--n-box-shadow);\n position: relative;\n transition:\n background-color .3s var(--n-bezier),\n box-shadow .3s var(--n-bezier);\n",[F(),B("dropdown-option","\n position: relative;\n ",[T("a","\n text-decoration: none;\n color: inherit;\n outline: none;\n ",[T("&::before",'\n content: "";\n position: absolute;\n left: 0;\n right: 0;\n top: 0;\n bottom: 0;\n ')]),B("dropdown-option-body","\n display: flex;\n cursor: pointer;\n position: relative;\n height: var(--n-option-height);\n line-height: var(--n-option-height);\n font-size: var(--n-font-size);\n color: var(--n-option-text-color);\n transition: color .3s var(--n-bezier);\n ",[T("&::before",'\n content: "";\n position: absolute;\n top: 0;\n bottom: 0;\n left: 4px;\n right: 4px;\n transition: background-color .3s var(--n-bezier);\n border-radius: var(--n-border-radius);\n '),K("disabled",[D("pending","\n color: var(--n-option-text-color-hover);\n ",[j("prefix, suffix","\n color: var(--n-option-text-color-hover);\n "),T("&::before","background-color: var(--n-option-color-hover);")]),D("active","\n color: var(--n-option-text-color-active);\n ",[j("prefix, suffix","\n color: var(--n-option-text-color-active);\n "),T("&::before","background-color: var(--n-option-color-active);")]),D("child-active","\n color: var(--n-option-text-color-child-active);\n ",[j("prefix, suffix","\n color: var(--n-option-text-color-child-active);\n ")])]),D("disabled","\n cursor: not-allowed;\n opacity: var(--n-option-opacity-disabled);\n "),D("group","\n font-size: calc(var(--n-font-size) - 1px);\n color: var(--n-group-header-text-color);\n ",[j("prefix","\n width: calc(var(--n-option-prefix-width) / 2);\n ",[D("show-icon","\n width: calc(var(--n-option-icon-prefix-width) / 2);\n ")])]),j("prefix","\n width: var(--n-option-prefix-width);\n display: flex;\n justify-content: center;\n align-items: center;\n color: var(--n-prefix-color);\n transition: color .3s var(--n-bezier);\n z-index: 1;\n ",[D("show-icon","\n width: var(--n-option-icon-prefix-width);\n "),B("icon","\n font-size: var(--n-option-icon-size);\n ")]),j("label","\n white-space: nowrap;\n flex: 1;\n z-index: 1;\n "),j("suffix","\n box-sizing: border-box;\n flex-grow: 0;\n flex-shrink: 0;\n display: flex;\n justify-content: flex-end;\n align-items: center;\n min-width: var(--n-option-suffix-width);\n padding: 0 8px;\n transition: color .3s var(--n-bezier);\n color: var(--n-suffix-color);\n z-index: 1;\n ",[D("has-submenu","\n width: var(--n-option-icon-suffix-width);\n "),B("icon","\n font-size: var(--n-option-icon-size);\n ")]),B("dropdown-menu","pointer-events: all;")]),B("dropdown-offset-container","\n pointer-events: none;\n position: absolute;\n left: 0;\n right: 0;\n top: -4px;\n bottom: -4px;\n ")]),B("dropdown-divider","\n transition: background-color .3s var(--n-bezier);\n background-color: var(--n-divider-color);\n height: 1px;\n margin: 4px 0;\n "),B("dropdown-menu-wrapper","\n transform-origin: var(--v-transform-origin);\n width: fit-content;\n "),T(">",[B("scrollbar","\n height: inherit;\n max-height: inherit;\n ")]),K("scrollable","\n padding: var(--n-padding);\n "),D("scrollable",[j("content","\n padding: var(--n-padding);\n ")])]),$e={animated:{type:Boolean,default:!0},keyboard:{type:Boolean,default:!0},size:{type:String,default:"medium"},inverted:Boolean,placement:{type:String,default:"bottom"},onSelect:[Function,Array],options:{type:Array,default:()=>[]},menuProps:Function,showArrow:Boolean,renderLabel:Function,renderIcon:Function,renderOption:Function,nodeProps:Function,labelField:{type:String,default:"label"},keyField:{type:String,default:"key"},childrenField:{type:String,default:"children"},value:[String,Number]},Be=Object.keys(J),Fe=v({name:"Dropdown",inheritAttrs:!1,props:Object.assign(Object.assign(Object.assign({},J),$e),q.props),setup(e){const n=i(!1),t=L(M(e,"show"),n),v=y((()=>{const{keyField:n,childrenField:t}=e;return o(e.options,{getKey:e=>e[n],getDisabled:e=>!0===e.disabled,getIgnored:e=>"divider"===e.type||"render"===e.type,getChildren:e=>e[t]})})),f=y((()=>v.value.treeNodes)),h=i(null),m=i(null),b=i(null),g=y((()=>{var e,n,o;return null!==(o=null!==(n=null!==(e=h.value)&&void 0!==e?e:m.value)&&void 0!==n?n:b.value)&&void 0!==o?o:null})),k=y((()=>v.value.getPath(g.value).keyPath)),S=y((()=>v.value.getPath(e.value).keyPath));!function(e={},n){const o=l({ctrl:!1,command:!1,win:!1,shift:!1,tab:!1}),{keydown:t,keyup:i}=e,v=e=>{switch(e.key){case"Control":o.ctrl=!0;break;case"Meta":o.command=!0,o.win=!0;break;case"Shift":o.shift=!0;break;case"Tab":o.tab=!0}void 0!==t&&Object.keys(t).forEach((n=>{if(n!==e.key)return;const o=t[n];if("function"==typeof o)o(e);else{const{stop:n=!1,prevent:t=!1}=o;n&&e.stopPropagation(),t&&e.preventDefault(),o.handler(e)}}))},f=e=>{switch(e.key){case"Control":o.ctrl=!1;break;case"Meta":o.command=!1,o.win=!1;break;case"Shift":o.shift=!1;break;case"Tab":o.tab=!1}void 0!==i&&Object.keys(i).forEach((n=>{if(n!==e.key)return;const o=i[n];if("function"==typeof o)o(e);else{const{stop:n=!1,prevent:t=!1}=o;n&&e.stopPropagation(),t&&e.preventDefault(),o.handler(e)}}))},h=()=>{(void 0===n||n.value)&&(p("keydown",document,v),p("keyup",document,f)),void 0!==n&&r(n,(e=>{e?(p("keydown",document,v),p("keyup",document,f)):(u("keydown",document,v),u("keyup",document,f))}))};a()?(d(h),s((()=>{(void 0===n||n.value)&&(u("keydown",document,v),u("keyup",document,f))}))):h(),c(o)}({keydown:{ArrowUp:{prevent:!0,handler:function(){z("up")}},ArrowRight:{prevent:!0,handler:function(){z("right")}},ArrowDown:{prevent:!0,handler:function(){z("down")}},ArrowLeft:{prevent:!0,handler:function(){z("left")}},Enter:{prevent:!0,handler:function(){const e=_();(null==e?void 0:e.isLeaf)&&t.value&&(P(e.key,e.rawNode),O(!1))}},Escape:function(){O(!1)}}},x((()=>e.keyboard&&t.value)));const{mergedClsPrefixRef:C,inlineThemeDisabled:N}=E(e),R=q("Dropdown","-dropdown",Ae,H,e,C);function P(n,o){const{onSelect:t}=e;t&&U(t,n,o)}function O(o){const{"onUpdate:show":t,onUpdateShow:i}=e;t&&U(t,o),i&&U(i,o),n.value=o}function I(){h.value=null,m.value=null,b.value=null}function _(){var e;const{value:n}=v,{value:o}=g;return n&&null!==o&&null!==(e=n.getNode(o))&&void 0!==e?e:null}function z(e){const{value:n}=g,{value:{getFirstAvailableNode:o}}=v;let t=null;if(null===n){const e=o();null!==e&&(t=e.key)}else{const n=_();if(n){let o;switch(e){case"down":o=n.getNext();break;case"up":o=n.getPrev();break;case"right":o=n.getChild();break;case"left":o=n.getParent()}o&&(t=o.key)}}null!==t&&(h.value=null,m.value=t)}w(Se,{labelFieldRef:M(e,"labelField"),childrenFieldRef:M(e,"childrenField"),renderLabelRef:M(e,"renderLabel"),renderIconRef:M(e,"renderIcon"),hoverKeyRef:h,keyboardKeyRef:m,lastToggledSubmenuKeyRef:b,pendingKeyPathRef:k,activeKeyPathRef:S,animatedRef:M(e,"animated"),mergedShowRef:t,nodePropsRef:M(e,"nodeProps"),renderOptionRef:M(e,"renderOption"),menuPropsRef:M(e,"menuProps"),doSelect:P,doUpdateShow:O}),r(t,(n=>{e.animated||n||I()}));const A=y((()=>{const{size:n,inverted:o}=e,{common:{cubicBezierEaseInOut:t},self:i}=R.value,{padding:r,dividerColor:l,borderRadius:a,optionOpacityDisabled:d,[V("optionIconSuffixWidth",n)]:s,[V("optionSuffixWidth",n)]:u,[V("optionIconPrefixWidth",n)]:c,[V("optionPrefixWidth",n)]:p,[V("fontSize",n)]:v,[V("optionHeight",n)]:f,[V("optionIconSize",n)]:h}=i,m={"--n-bezier":t,"--n-font-size":v,"--n-padding":r,"--n-border-radius":a,"--n-option-height":f,"--n-option-prefix-width":p,"--n-option-icon-prefix-width":c,"--n-option-suffix-width":u,"--n-option-icon-suffix-width":s,"--n-option-icon-size":h,"--n-divider-color":l,"--n-option-opacity-disabled":d};return o?(m["--n-color"]=i.colorInverted,m["--n-option-color-hover"]=i.optionColorHoverInverted,m["--n-option-color-active"]=i.optionColorActiveInverted,m["--n-option-text-color"]=i.optionTextColorInverted,m["--n-option-text-color-hover"]=i.optionTextColorHoverInverted,m["--n-option-text-color-active"]=i.optionTextColorActiveInverted,m["--n-option-text-color-child-active"]=i.optionTextColorChildActiveInverted,m["--n-prefix-color"]=i.prefixColorInverted,m["--n-suffix-color"]=i.suffixColorInverted,m["--n-group-header-text-color"]=i.groupHeaderTextColorInverted):(m["--n-color"]=i.color,m["--n-option-color-hover"]=i.optionColorHover,m["--n-option-color-active"]=i.optionColorActive,m["--n-option-text-color"]=i.optionTextColor,m["--n-option-text-color-hover"]=i.optionTextColorHover,m["--n-option-text-color-active"]=i.optionTextColorActive,m["--n-option-text-color-child-active"]=i.optionTextColorChildActive,m["--n-prefix-color"]=i.prefixColor,m["--n-suffix-color"]=i.suffixColor,m["--n-group-header-text-color"]=i.groupHeaderTextColor),m})),$=N?W("dropdown",y((()=>`${e.size[0]}${e.inverted?"i":""}`)),A,e):void 0;return{mergedClsPrefix:C,mergedTheme:R,tmNodes:f,mergedShow:t,handleAfterLeave:()=>{e.animated&&I()},doUpdateShow:O,cssVars:N?void 0:A,themeClass:null==$?void 0:$.themeClass,onRender:null==$?void 0:$.onRender}},render(){const{mergedTheme:e}=this,n={show:this.mergedShow,theme:e.peers.Popover,themeOverrides:e.peerOverrides.Popover,internalOnAfterLeave:this.handleAfterLeave,internalRenderBody:(e,n,o,t,i)=>{var r;const{mergedClsPrefix:l,menuProps:a}=this;null===(r=this.onRender)||void 0===r||r.call(this);const d=(null==a?void 0:a(void 0,this.tmNodes.map((e=>e.rawNode))))||{},s={ref:xe(n),class:[e,`${l}-dropdown`,this.themeClass],clsPrefix:l,tmNodes:this.tmNodes,style:[...o,this.cssVars],showArrow:this.showArrow,arrowStyle:this.arrowStyle,scrollable:this.scrollable,onMouseenter:t,onMouseleave:i};return f(ze,N(this.$attrs,s,d))},onUpdateShow:this.doUpdateShow,"onUpdate:show":void 0};return f(Q,Object.assign({},G(this.$props,Be),n),{trigger:()=>{var e,n;return null===(n=(e=this.$slots).default)||void 0===n?void 0:n.call(e)}})}}),Te={class:"dynamic-value-display"},Ke={key:0,class:"d-label"},De=re(v({__name:"DynamicValueDisplay",props:{text:{default:""},label:{},formatFn:{}},setup(e){const n=e,{text:o}=X(n),t=i("");return Y(o,(()=>{"function"==typeof n.formatFn?t.value=n.formatFn(o.value):t.value=o.value}),{debounce:300,immediate:!0}),(e,n)=>(Z(),ee("div",Te,[ne(oe(te(t))+" ",1),e.label?(Z(),ee("span",Ke,oe(e.label),1)):ie("",!0)]))}}),[["__scopeId","data-v-fe46d2a4"]]),je=["data-index"],Le={key:0,class:"index-wrap"},Me={key:1,class:"item-icon"},Ee={key:2,class:"item-icon"},qe=["src"],He=["innerHTML"],Ue={key:4,class:"item-content"},Ve={key:5,class:"item-content"},We={key:6,class:"item-content"},Ge={key:7,class:"arrow-wrap"},Qe=[le("div",{class:"css-arrow right"},null,-1)],Je=v({__name:"QOptionItem",props:{item:{},index:{default:0},curIndex:{default:0},itemCls:{default:""},showIndex:{type:Boolean,default:!0}},setup:e=>(e,n)=>{var o,i,r,l,a,d;return Z(),ee("div",{class:ue(["option-item",[{focus:e.curIndex===e.index,clickable:(null==(i=null==(o=e.item)?void 0:o.props)?void 0:i.onClick)||(null==(l=null==(r=e.item)?void 0:r.props)?void 0:l.isBack)||e.item.children&&e.item.children,disabled:e.item.disabled},e.itemCls,null==(a=e.item.props)?void 0:a.class]]),style:ce(null==(d=e.item.props)?void 0:d.style),"data-index":e.index},[e.showIndex&&e.index<9?(Z(),ee("div",Le,[le("span",null,oe(e.index+1),1)])):ie("",!0),e.item.iconRender?(Z(),ee("div",Me,[ae(t,{"render-fn":e.item.iconRender},null,8,["render-fn"])])):e.item.icon?(Z(),ee("div",Ee,[le("img",{src:e.item.icon},null,8,qe)])):ie("",!0),e.item.html?(Z(),ee("div",{key:3,class:"item-content",innerHTML:e.item.html},null,8,He)):e.item.render?(Z(),ee("div",Ue,[ae(t,{"render-fn":e.item.render},null,8,["render-fn"])])):e.item.dynamicProps?(Z(),ee("div",Ve,[ae(De,de(se(e.item.dynamicProps)),null,16)])):(Z(),ee("div",We,oe(e.item.label),1)),e.item.children&&e.item.children?(Z(),ee("div",Ge,Qe)):ie("",!0)],14,je)}}),Xe=v({name:"QuickOptions",components:{QOptionItem:Je},props:{visible:{type:Boolean,default:!1},closeOnClick:{type:Boolean,default:!0},horizontal:{type:Boolean,default:!1},title:{type:String,default:""},options:{type:Array,default:()=>[]},isStatic:{type:Boolean,default:!1},autoFocus:{type:Boolean,default:!0},showIndex:{type:Boolean,default:!0},itemCls:{type:String,default:""}},emits:["onClose","update:visible","onBack","onEnter"],setup(e,{emit:n}){const{options:o,horizontal:t,isStatic:l,autoFocus:a,closeOnClick:d}=X(e),s=pe(e,"visible",n),u=i();ve(u,(e=>{l.value||setTimeout((()=>{s.value=!1}))}));const c=()=>{const e=u.value.querySelector(`[data-index="${p.value}"]`);he((()=>{e&&e.scrollIntoView({behavior:"instant",block:"center"})}))},p=i(0),v=e=>w.value[e]&&w.value[e].split?2:1,f=()=>{p.value-=v(p.value-1),p.value<0&&(p.value=w.value.length-1),c()},h=()=>{p.value+=v(p.value+1),p.value>w.value.length-1&&(p.value=0),c()},m=()=>{setTimeout((()=>{u.value.focus()}),10)};fe((()=>{l.value&&a.value&&m()})),r(s,(e=>{e?(p.value=0,a.value&&m()):b.value=[]}));const b=i([]),w=y((()=>{if(b.value.length){const e=b.value[b.value.length-1];return e.__v_isRef?e.value:e}return o.value})),x=()=>{b.value.length?(b.value.pop(),n("onBack")):(s.value=!1,setTimeout((()=>{n("onClose")}),100)),p.value=0,c()},g=()=>{const e=w.value[p.value];k(e)},k=async(e,o)=>{var t,i;if(!e.disabled){if(null==(t=null==e?void 0:e.props)?void 0:t.onClick)e.props.onClick(e,o),d.value&&(s.value=!1);else if(e.children){let o=[];"function"==typeof e.children?o=await e.children():e.children.length&&(o=e.children),b.value.push(o),p.value=0,n("onEnter")}if(null==(i=null==e?void 0:e.props)?void 0:i.isBack)if("number"==typeof e.props.isBack)for(let n=0;n<e.props.isBack;n++)x();else x()}};return{mVisible:s,quickRootRef:u,menuStack:b,curIndex:p,handleKeyPress:e=>{if(e.preventDefault(),"Escape"===e.key||"q"===e.key)x();else if("Tab"===e.key)h();else if("ArrowUp"===e.key)t.value?x():f();else if("ArrowDown"===e.key)t.value?g():h();else if("ArrowLeft"===e.key)t.value?f():x();else if("ArrowRight"===e.key)t.value?h():g();else if("Enter"===e.key)g();else if(" "===e.key)g();else if(e.keyCode>=49&&e.keyCode<=57){const n=Number(String.fromCharCode(e.keyCode));if(Number.isNaN(n))return;const o=w.value[n-1];o&&k(o)}},handleBack:x,mOptions:w,handleOptionClick:k,handleOptionContextmenu:async(e,n)=>{var o;(null==(o=null==e?void 0:e.props)?void 0:o.onContextmenu)&&(null==n||n.preventDefault(),e.props.onContextmenu(e,n))},focus:m,isFocused:()=>document.activeElement!==u.value}}}),Ye={key:0,class:"option-title"},Ze=le("div",{class:"index-wrap"},[le("div",{style:{transform:"scale(0.7)"}},[le("div",{class:"css-arrow left"})])],-1),en={key:0,class:"option-split"};const nn=re(Xe,[["render",function(e,n,o,t,i,r){const l=Je,a=Fe;return e.mVisible||e.isStatic?(Z(),ee("div",{key:0,class:ue(["quick-options _scrollbar_mini",{_absolute:!e.isStatic,_s:e.isStatic,horizontal:e.horizontal,"vp-panel":!e.horizontal&&!e.isStatic}]),onKeydown:n[2]||(n[2]=we(((...n)=>e.handleKeyPress&&e.handleKeyPress(...n)),["stop"])),tabindex:"0",ref:"quickRootRef"},[e.title?(Z(),ee("div",Ye,[ne(oe(e.title)+" ",1),le("button",{class:"btn-no-style",onClick:n[0]||(n[0]=n=>e.mVisible=!1)},"×")])):ie("",!0),e.menuStack.length?(Z(),ee("div",{key:1,class:"option-item vp-bg _back clickable",onClick:n[1]||(n[1]=(...n)=>e.handleBack&&e.handleBack(...n))},[Ze,ne(" Back (q) ")])):ie("",!0),(Z(!0),ee(I,null,me(e.mOptions,((n,o)=>(Z(),ee(I,{key:o},[n.split?(Z(),ee("div",en)):n.dropdown?(Z(),be(a,{key:1,options:n.dropdown,"label-field":"label","key-field":"key",size:"small"},{default:ye((()=>[ae(l,{item:n,index:o,"cur-index":e.curIndex,"item-cls":e.itemCls,"show-index":e.showIndex,onClick:o=>e.handleOptionClick(n,o),onContextmenu:o=>e.handleOptionContextmenu(n,o)},null,8,["item","index","cur-index","item-cls","show-index","onClick","onContextmenu"])])),_:2},1032,["options"])):(Z(),be(l,{key:2,item:n,index:o,"cur-index":e.curIndex,"item-cls":e.itemCls,"show-index":e.showIndex,onClick:o=>e.handleOptionClick(n,o),onContextmenu:o=>e.handleOptionContextmenu(n,o)},null,8,["item","index","cur-index","item-cls","show-index","onClick","onContextmenu"]))],64)))),128))],34)):ie("",!0)}]]);export{nn as _};
