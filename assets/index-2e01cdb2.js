import{u as N,i as P,g as I}from"./music-7db83a62.js";import{q as C,k as y,b1 as O,B as L,d as v,s as U,t as V,b2 as j,c as x,p as K,y as W,z as E,h as g,K as q,T as G,aE as d,aF as m,aG as n,b3 as J,b4 as Q,b5 as X,b6 as Y,aI as D,aR as _,aP as u,aO as w,aN as z,b7 as k,aL as R,aS as M,r as F,o as Z,aj as S,b8 as ee,b9 as te,aQ as H,an as ne,$ as se,aJ as oe,ba as ie}from"./index-3cde8b9e.js";import{u as ae}from"./use-compitable-4eabf116.js";import{_ as le}from"./index-262d1b76.js";import"./axios-28bc18a3.js";const re=C([C("@keyframes spin-rotate",`
 from {
 transform: rotate(0);
 }
 to {
 transform: rotate(360deg);
 }
 `),y("spin-container",{position:"relative"},[y("spin-body",`
 position: absolute;
 top: 50%;
 left: 50%;
 transform: translateX(-50%) translateY(-50%);
 `,[O()])]),y("spin-body",`
 display: inline-flex;
 align-items: center;
 justify-content: center;
 flex-direction: column;
 `),y("spin",`
 display: inline-flex;
 height: var(--n-size);
 width: var(--n-size);
 font-size: var(--n-size);
 color: var(--n-color);
 `,[L("rotate",`
 animation: spin-rotate 2s linear infinite;
 `)]),y("spin-description",`
 display: inline-block;
 font-size: var(--n-font-size);
 color: var(--n-text-color);
 transition: color .3s var(--n-bezier);
 margin-top: 8px;
 `),y("spin-content",`
 opacity: 1;
 transition: opacity .3s var(--n-bezier);
 pointer-events: all;
 `,[L("spinning",`
 user-select: none;
 -webkit-user-select: none;
 pointer-events: none;
 opacity: var(--n-opacity-spinning);
 `)])]),ce={small:20,medium:18,large:16},de=Object.assign(Object.assign({},V.props),{description:String,stroke:String,size:{type:[String,Number],default:"medium"},show:{type:Boolean,default:!0},strokeWidth:Number,rotate:{type:Boolean,default:!0},spinning:{type:Boolean,validator:()=>!0,default:void 0}}),ue=v({name:"Spin",props:de,setup(e){const{mergedClsPrefixRef:t,inlineThemeDisabled:s}=U(e),o=V("Spin","-spin",re,j,e,t),h=x(()=>{const{size:i}=e,{common:{cubicBezierEaseInOut:l},self:f}=o.value,{opacitySpinning:a,color:r,textColor:b}=f,$=typeof i=="number"?K(i):f[W("size",i)];return{"--n-bezier":l,"--n-opacity-spinning":a,"--n-size":$,"--n-color":r,"--n-text-color":b}}),p=s?E("spin",x(()=>{const{size:i}=e;return typeof i=="number"?String(i):i[0]}),h,e):void 0;return{mergedClsPrefix:t,compitableShow:ae(e,["spinning","show"]),mergedStrokeWidth:x(()=>{const{strokeWidth:i}=e;if(i!==void 0)return i;const{size:l}=e;return ce[typeof l=="number"?"medium":l]}),cssVars:s?void 0:h,themeClass:p==null?void 0:p.themeClass,onRender:p==null?void 0:p.onRender}},render(){var e,t;const{$slots:s,mergedClsPrefix:o,description:h}=this,p=s.icon&&this.rotate,i=(h||s.description)&&g("div",{class:`${o}-spin-description`},h||((e=s.description)===null||e===void 0?void 0:e.call(s))),l=s.icon?g("div",{class:[`${o}-spin-body`,this.themeClass]},g("div",{class:[`${o}-spin`,p&&`${o}-spin--rotate`],style:s.default?"":this.cssVars},s.icon()),i):g("div",{class:[`${o}-spin-body`,this.themeClass]},g(q,{clsPrefix:o,style:s.default?"":this.cssVars,stroke:this.stroke,"stroke-width":this.mergedStrokeWidth,class:`${o}-spin`}),i);return(t=this.onRender)===null||t===void 0||t.call(this),s.default?g("div",{class:[`${o}-spin-container`,this.themeClass],style:this.cssVars},g("div",{class:[`${o}-spin-content`,this.compitableShow&&`${o}-spin-content--spinning`]},s),g(G,{name:"fade-in-transition"},{default:()=>this.compitableShow?l:null})):l}}),pe={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 20 20"},me=n("g",{fill:"none"},[n("path",{d:"M9.885 3.75a6.25 6.25 0 0 0-3.628 11.256a.75.75 0 0 1-.9 1.2a7.75 7.75 0 0 1 3.99-13.93l-.584-.586A.75.75 0 0 1 9.823.63l2.122 2.121a.75.75 0 0 1 0 1.06L9.823 5.934a.75.75 0 0 1-1.06-1.06L9.885 3.75zm.23 12.498a6.25 6.25 0 0 0 3.628-11.256a.75.75 0 0 1 .9-1.2a7.75 7.75 0 0 1-3.99 13.93l.584.585a.75.75 0 1 1-1.06 1.061l-2.122-2.121a.75.75 0 0 1 0-1.06l2.122-2.122a.75.75 0 1 1 1.06 1.06l-1.122 1.123z",fill:"currentColor"})],-1),he=[me],ve=v({name:"ArrowSync20Filled",render:function(t,s){return d(),m("svg",pe,he)}}),fe={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 20 20"},_e=n("g",{fill:"none"},[n("path",{d:"M3.132 9.16a.5.5 0 1 0 .738.675l5.631-6.168v13.831a.5.5 0 1 0 1 0V3.67l5.628 6.165a.5.5 0 1 0 .739-.674l-6.314-6.916a.746.746 0 0 0-.632-.24a.746.746 0 0 0-.476.24L3.132 9.16z",fill:"currentColor"})],-1),ge=[_e],we=v({name:"ArrowUp20Regular",render:function(t,s){return d(),m("svg",fe,ge)}}),be={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 20 20"},ye=n("g",{fill:"none"},[n("path",{d:"M11.5 4a1.5 1.5 0 0 0-3 0h-1a2.5 2.5 0 0 1 5 0H17a.5.5 0 0 1 0 1h-.554L15.15 16.23A2 2 0 0 1 13.163 18H6.837a2 2 0 0 1-1.987-1.77L3.553 5H3a.5.5 0 0 1-.492-.41L2.5 4.5A.5.5 0 0 1 3 4h8.5zm3.938 1H4.561l1.282 11.115a1 1 0 0 0 .994.885h6.326a1 1 0 0 0 .993-.885L15.438 5zM8.5 7.5c.245 0 .45.155.492.359L9 7.938v6.125c0 .241-.224.437-.5.437c-.245 0-.45-.155-.492-.359L8 14.062V7.939c0-.242.224-.438.5-.438zm3 0c.245 0 .45.155.492.359l.008.079v6.125c0 .241-.224.437-.5.437c-.245 0-.45-.155-.492-.359L11 14.062V7.939c0-.242.224-.438.5-.438z",fill:"currentColor"})],-1),$e=[ye],ze=v({name:"Delete20Regular",render:function(t,s){return d(),m("svg",be,$e)}}),xe={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 20 20"},ke=n("g",{fill:"none"},[n("path",{d:"M6 2a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V7.414a1.5 1.5 0 0 0-.44-1.06l-3.914-3.915A1.5 1.5 0 0 0 10.586 2H6zM5 4a1 1 0 0 1 1-1h4v3.5A1.5 1.5 0 0 0 11.5 8H15v8a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V4zm9.793 3H11.5a.5.5 0 0 1-.5-.5V3.207L14.793 7z",fill:"currentColor"})],-1),Re=[ke],Fe=v({name:"Document20Regular",render:function(t,s){return d(),m("svg",xe,Re)}}),Ae={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 20 20"},Ce=n("g",{fill:"none"},[n("path",{d:"M6 2a2 2 0 0 0-2 2v5.207a5.48 5.48 0 0 1 1-.185V4a1 1 0 0 1 1-1h4v3.5A1.5 1.5 0 0 0 11.5 8H15v8a1 1 0 0 1-1 1h-3.6a5.507 5.507 0 0 1-.657 1H14a2 2 0 0 0 2-2V7.414a1.5 1.5 0 0 0-.44-1.06l-3.914-3.915A1.5 1.5 0 0 0 10.586 2H6zm8.793 5H11.5a.5.5 0 0 1-.5-.5V3.207L14.793 7zM10 14.5a4.5 4.5 0 1 1-9 0a4.5 4.5 0 0 1 9 0zm-4-2a.5.5 0 0 0-1 0V14H3.5a.5.5 0 0 0 0 1H5v1.5a.5.5 0 0 0 1 0V15h1.5a.5.5 0 0 0 0-1H6v-1.5z",fill:"currentColor"})],-1),Le=[Ce],Se=v({name:"DocumentAdd20Regular",render:function(t,s){return d(),m("svg",Ae,Le)}}),He={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 20 20"},Ve=n("g",{fill:"none"},[n("path",{d:"M7.167 3c.27 0 .535.073.765.21l.135.09l1.6 1.2H15.5a2.5 2.5 0 0 1 2.479 2.174l.016.162L18 7v7.5a2.5 2.5 0 0 1-2.336 2.495L15.5 17h-11a2.5 2.5 0 0 1-2.495-2.336L2 14.5v-9a2.5 2.5 0 0 1 2.336-2.495L4.5 3h2.667zm.99 4.034a1.5 1.5 0 0 1-.933.458l-.153.008L3 7.499V14.5a1.5 1.5 0 0 0 1.356 1.493L4.5 16h11a1.5 1.5 0 0 0 1.493-1.355L17 14.5V7a1.5 1.5 0 0 0-1.355-1.493L15.5 5.5H9.617l-1.46 1.534zM7.168 4H4.5a1.5 1.5 0 0 0-1.493 1.356L3 5.5v.999l4.071.001a.5.5 0 0 0 .302-.101l.06-.054L8.694 5.02L7.467 4.1a.5.5 0 0 0-.22-.093L7.167 4z",fill:"currentColor"})],-1),De=[Ve],Me=v({name:"Folder20Regular",render:function(t,s){return d(),m("svg",He,De)}}),Be={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 20 20"},Te=n("g",{fill:"none"},[n("path",{d:"M4.5 3A2.5 2.5 0 0 0 2 5.5v9A2.5 2.5 0 0 0 4.5 17h5.1a5.465 5.465 0 0 1-.393-1H4.5A1.5 1.5 0 0 1 3 14.5v-7h4.071a1.5 1.5 0 0 0 1.087-.466L9.619 5.5H15.5A1.5 1.5 0 0 1 17 7v2.6c.358.183.693.404 1 .657V7a2.5 2.5 0 0 0-2.5-2.5H9.667l-1.6-1.2a1.5 1.5 0 0 0-.9-.3H4.5zM3 5.5A1.5 1.5 0 0 1 4.5 4h2.667a.5.5 0 0 1 .3.1l1.227.92l-1.26 1.325a.5.5 0 0 1-.363.155H3v-1zm16 9a4.5 4.5 0 1 1-9 0a4.5 4.5 0 0 1 9 0zm-4-2a.5.5 0 0 0-1 0V14h-1.5a.5.5 0 0 0 0 1H14v1.5a.5.5 0 0 0 1 0V15h1.5a.5.5 0 0 0 0-1H15v-1.5z",fill:"currentColor"})],-1),Ne=[Te],Pe=v({name:"FolderAdd20Regular",render:function(t,s){return d(),m("svg",Be,Ne)}}),Ie={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 20 20"},Oe=n("g",{fill:"none"},[n("path",{d:"M8.5 2a.5.5 0 0 0 0 1h1v14h-1a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1h-1V3h1a.5.5 0 0 0 0-1h-3zm-4 2h4v1h-4A1.5 1.5 0 0 0 3 6.5v7A1.5 1.5 0 0 0 4.5 15h4v1h-4A2.5 2.5 0 0 1 2 13.5v-7A2.5 2.5 0 0 1 4.5 4zm11 11h-4v1h4a2.5 2.5 0 0 0 2.5-2.5v-7A2.5 2.5 0 0 0 15.5 4h-4v1h4A1.5 1.5 0 0 1 17 6.5v7a1.5 1.5 0 0 1-1.5 1.5z",fill:"currentColor"})],-1),Ue=[Oe],je=v({name:"Rename20Regular",render:function(t,s){return d(),m("svg",Ie,Ue)}}),Ke=()=>{const e=N(),t=J();return{openFile:(o,h)=>{if(P(o.filename)){t.createTask(Q),setTimeout(()=>{e.playFromFiles(o,h)},100);return}console.log("不支持的格式",o)}}},We=v({name:"FileListItem",components:{Folder20Regular:Me,Document20Regular:Fe,Rename20Regular:je,Delete20Regular:ze},props:{item:{type:Object,required:!0}},emits:["openFile"],setup(){return{bytesToSize:X,formatDate:Y}}});const Ee={class:"file-list-item file-list-row"},qe={class:"list-col c-filename"},Ge=["title"],Je={class:"list-col c-size"},Qe={class:"list-col c-time"},Xe={class:"list-col c-actions"};function Ye(e,t,s,o,h,p){const i=_("Folder20Regular"),l=_("Document20Regular"),f=M,a=_("Rename20Regular"),r=_("Delete20Regular");return d(),m("div",Ee,[n("div",qe,[u(f,{size:"20"},{default:w(()=>[e.item.isDirectory?(d(),z(i,{key:0})):(d(),z(l,{key:1}))]),_:1}),n("span",{class:"text-overflow filename-text",onClick:t[0]||(t[0]=k(b=>e.$emit("openFile"),["stop"])),title:e.item.filename},R(e.item.filename),9,Ge)]),n("div",Je,R(e.bytesToSize(e.item.size)),1),n("div",Qe,R(e.formatDate(e.item.birthtime)),1),n("div",Xe,[n("button",{disabled:"",class:"vp-button",onClick:t[1]||(t[1]=k(b=>e.handleFileAction("rename",e.item,e.index),["stop"])),title:"Rename"},[u(f,{size:"16"},{default:w(()=>[u(a)]),_:1})]),n("button",{disabled:"",class:"vp-button",onClick:t[2]||(t[2]=k(b=>e.handleFileAction("delete",e.item,e.index),["stop"])),title:"Delete"},[u(f,{size:"16"},{default:w(()=>[u(r)]),_:1})])])])}const Ze=D(We,[["render",Ye],["__scopeId","data-v-2ac7320f"]]),et=v({name:"FileManager",components:{FileListItem:Ze,ArrowUp20Regular:we,ArrowSync20Filled:ve,DocumentAdd20Regular:Se,FolderAdd20Regular:Pe},setup(){const e=F([]),t=F("/"),s=F(!1),o=async()=>{try{s.value=!0,t.value||(t.value="/");const r=(await I({path:t.value,getPlayStat:!0})).list;e.value=r}catch(a){console.error(a),e.value=[]}finally{s.value=!1}},h=()=>{const a=t.value.split("/").filter(r=>!!r);if(console.log(a),a.pop(),!a.length){t.value="/",o();return}t.value="/"+a.join("/")+"/",o()};Z(()=>{o()});const p=()=>{o()},i=()=>{},{openFile:l}=Ke();return{files:e,basePath:t,handleRefresh:o,goUp:h,handleCreateFile:p,handleCreateFolder:i,handleFileAction:(a,r,b)=>{if(a==="open"){if(r.isDirectory){t.value+=r.filename+"/",o();return}else l(r,e.value);return}if(a==="rename"){if(!prompt("input new path",r.filename))return;o();return}a==="delete"&&(t.value+r.filename,r.isDirectory,o())},isLoading:s}}});const tt={class:"explorer-wrap"},nt={class:"explorer-header"},st={class:"nav-address"},ot={class:"nav-wrap"},it={class:"input-wrap"},at={class:"explorer-content _scrollbar_mini"},lt={class:"file-list"},rt=ie('<div class="file-list-header file-list-row"><div class="list-col c-filename">filename</div><div class="list-col c-size">size</div><div class="list-col c-time">Create Time</div><div class="list-col c-actions">actions</div></div>',1),ct={key:0,style:{"text-align":"center",padding:"50px"}};function dt(e,t,s,o,h,p){const i=_("DocumentAdd20Regular"),l=M,f=_("FolderAdd20Regular"),a=_("ArrowUp20Regular"),r=_("ArrowSync20Filled"),b=ue,$=le,B=_("FileListItem");return d(),m("div",tt,[n("div",nt,[n("div",st,[n("div",ot,[n("button",{disabled:"",class:"btn-action vp-button",onClick:t[0]||(t[0]=(...c)=>e.handleCreateFile&&e.handleCreateFile(...c)),title:"Create Document"},[u(l,{size:"16"},{default:w(()=>[u(i)]),_:1})]),n("button",{disabled:"",class:"btn-action vp-button",onClick:t[1]||(t[1]=(...c)=>e.handleCreateFolder&&e.handleCreateFolder(...c)),title:"Create Folder"},[u(l,{size:"16"},{default:w(()=>[u(f)]),_:1})]),n("button",{class:"btn-action vp-button",onClick:t[2]||(t[2]=(...c)=>e.goUp&&e.goUp(...c)),title:"Up"},[u(l,{size:"16"},{default:w(()=>[u(a)]),_:1})])]),n("div",it,[S(n("input",{placeholder:"Path","onUpdate:modelValue":t[3]||(t[3]=c=>e.basePath=c),class:"input-addr vp-input",onKeyup:t[4]||(t[4]=te((...c)=>e.handleRefresh&&e.handleRefresh(...c),["enter"]))},null,544),[[ee,e.basePath]]),n("button",{class:"vp-button btn-action",onClick:t[5]||(t[5]=(...c)=>e.handleRefresh&&e.handleRefresh(...c))},[u(l,{size:"16"},{default:w(()=>[u(r)]),_:1})])])])]),n("div",at,[e.isLoading?(d(),z($,{key:0,align:"center",justify:"center"},{default:w(()=>[u(b)]),_:1})):H("",!0),S(n("div",lt,[rt,(d(!0),m(se,null,oe(e.files,(c,A)=>(d(),z(B,{item:c,key:c.id,onOpenFile:T=>e.handleFileAction("open",c,A),onDblclick:T=>e.handleFileAction("open",c,A)},null,8,["item","onOpenFile","onDblclick"]))),128)),e.files.length?H("",!0):(d(),m("div",ct," This folder is empty "))],512),[[ne,!e.isLoading]])])])}const ft=D(et,[["render",dt]]);export{ft as default};
